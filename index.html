<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Precision Sales Intelligence Dashboard</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Configure Tailwind to use the 'Inter' font and define a custom color palette -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-blue': '#1e40af', // Darker Blue for main actions (Deep Primary)
                        'secondary-cyan': '#06b6d4', // Bright Cyan for accents (Highlight)
                        'accent-orange': '#f97316', // Orange for key CTAs
                        'dark-bg': '#0f172a', // Slate-900 (Page Background)
                        'card-bg': '#1f2937', // Slate-800 (Card/Modal Background)
                        'light-text': '#f1f5f9', // Slate-100 (Main Text)
                        'subtle-text': '#94a3b8', // Slate-400 (Secondary Text)
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <!-- Inter Font and Material Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        /* CSS vars used by inline styles in this file - provide fallbacks for native CSS rules
           and for any code using var(--*) values. These mirror the Tailwind custom colors. */
        :root {
            --primary-blue: #1e40af;
            --secondary-cyan: #06b6d4;
            --accent-orange: #f97316;
            --dark-bg: #0f172a;
            --card-bg: #1f2937;
            --light-text: #f1f5f9;
            --subtle-text: #94a3b8;
        }

        /* Small spinner animation used by TTS/play buttons and loading states */
        .spin-animation { animation: spin 1s linear infinite; display: inline-block; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* Custom scrollbar and base styling */
        body {
            background-color: var(--dark-bg);
            color: var(--light-text);
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #06b6d4;
            border-radius: 4px;
        }
        .page { display: none; min-height: 100vh; }
        .page.active { display: block; }
        
        /* Utility overrides to use Tailwind colors */
        .app-container { border-color: #334155; }
        .action-button:hover { background-color: #06b6d4; }
        .btn-login, .btn-signup { 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); 
            transition: transform 0.2s; 
        }
        .btn-signup:hover { transform: translateY(-2px); }

        /* Specific Component Styling */
        .card-header { border-bottom: 3px solid #f97316; }
        .card-icon { color: #06b6d4; }
        .section-title::after { background-color: #f97316; }

        /* AI Chat Specifics */
        #chatBox { background-color: #1e293b; }
        .ai-header { background-color: #1e40af; }
        .user-message .message-bubble { background-color: #06b6d4; }
        .ai-message .message-bubble { background-color: #334155; color: #f1f5f9; }
        .chat-input input { background-color: #0f172a; border-color: #334155; color: #f1f5f9; }
        .ai-status.online { background-color: #1e40af; color: #f1f5f9; }
        .ai-status.typing { background-color: #f97316; color: #1f2937; }
        .chat-input button { color: #1e40af; }

        /* Navigation Active Link Styling */
        .nav-link.active {
            color: var(--accent-orange);
            font-weight: 600;
            position: relative;
        }
        .nav-link.active::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: -2px;
            width: 100%;
            height: 2px;
            background-color: var(--accent-orange);
            transform: scaleX(1);
        }

        /* Mobile Adjustments for Nav */
        @media (max-width: 640px) {
            .nav-link { margin-left: 0 !important; }
            .nav-link.active::after { bottom: 0 !important; }
        }
    </style>
</head>
<body class="bg-dark-bg text-light-text font-sans scroll-smooth">
    <div id="homepage" class="page active">
        <header class="h-screen flex flex-col" style="background: linear-gradient(135deg, #1e40af, #0f172a);">
            <nav class="max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center text-white">
                <div class="flex items-center space-x-2">
                    <div class="text-2xl font-bold text-secondary-cyan">
                        AI <span class="text-light-text">Sales</span>.
                    </div>
                </div>
                <div class="flex space-x-4 items-center">
                    <a href="#" onclick="showPage('dashboard-page', this)" id="navDashboardLink" class="font-medium hover:text-accent-orange transition duration-200 nav-link" style="display:none;" data-en="Dashboard" data-hi="‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°" data-ta="‡Æü‡Ææ‡Æ∑‡Øç‡Æ™‡Øã‡Æ∞‡Øç‡Æü‡ØÅ" data-ma="‡¥°‡¥æ‡¥∑‡µç‚Äå‡¥¨‡µã‡µº‡¥°‡µç">Dashboard</a>
                    <a href="#" onclick="showPage('transcript-library-page', this)" class="font-medium hover:text-accent-orange transition duration-200 nav-link" data-en="Transcript Library" data-hi="‡§™‡•ç‡§∞‡§§‡§ø‡§≤‡•á‡§ñ ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§æ‡§≤‡§Ø" data-ta="‡Æü‡Æø‡Æ∞‡Ææ‡Æ©‡Øç‡Æ∏‡Øç‡Æï‡Æø‡Æ∞‡Æø‡Æ™‡Øç‡Æü‡Øç ‡Æ®‡ØÇ‡Æ≤‡Æï‡ÆÆ‡Øç" data-ma="‡¥ü‡µç‡¥∞‡¥æ‡µª‡¥∏‡µç‡¥ï‡µç‡¥∞‡¥ø‡¥™‡µç‡¥±‡µç‡¥±‡µç ‡¥≤‡µà‡¥¨‡µç‡¥∞‡¥±‡¥ø">Transcript Library</a>
                    <a href="#" onclick="showPage('transcript-analysis-page', this)" class="font-medium hover:text-accent-orange transition duration-200 nav-link" data-en="Analyze Transcript" data-hi="‡§™‡•ç‡§∞‡§§‡§ø‡§≤‡•á‡§ñ ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç" data-ta="‡Æü‡Æø‡Æ∞‡Ææ‡Æ©‡Øç‡Æ∏‡Øç‡Æï‡Æø‡Æ∞‡Æø‡Æ™‡Øç‡Æü‡Øà ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç" data-ma="‡¥ü‡µç‡¥∞‡¥æ‡µª‡¥∏‡µç‡¥ï‡µç‡¥∞‡¥ø‡¥™‡µç‡¥±‡µç‡¥±‡µç ‡¥µ‡¥ø‡¥∂‡¥ï‡¥≤‡¥®‡¥Ç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï">Analyze Transcript</a>
                </div>
                <div class="flex space-x-3 items-center">
                    <a href="#" class="px-4 py-2 bg-primary-blue text-light-text font-semibold rounded-lg shadow-md hover:bg-secondary-cyan transition duration-300 btn-login" id="loginBtn" data-en="Log In" data-hi="‡§≤‡•â‡§ó ‡§á‡§®" data-ta="‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà‡Æï" data-ma="‡¥≤‡µã‡¥ó‡¥ø‡µª ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï">Log In</a>
                    <a href="#" class="px-4 py-2 bg-accent-orange text-dark-bg font-semibold rounded-lg shadow-md hover:bg-orange-600 transition duration-300 btn-onboarding primary-btn" id="signupBtn" data-en="Sign Up" data-hi="‡§∏‡§æ‡§á‡§® ‡§Ö‡§™" data-ta="‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡Æï" data-ma="‡¥∏‡µà‡µª ‡¥Ö‡¥™‡µç‡¥™‡µç">Sign Up</a>
                    <a href="#" id="logoutBtn" class="px-4 py-2 bg-gray-600 text-light-text font-semibold rounded-lg shadow-md hover:bg-gray-500 transition duration-300 btn-logout" style="display:none;" data-en="Log Out" data-hi="‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü" data-ta="‡Æµ‡ØÜ‡Æ≥‡Æø‡ÆØ‡Øá‡Æ±‡ØÅ" data-ma="‡¥™‡µÅ‡¥±‡¥§‡µç‡¥§‡µÅ‡¥ï‡¥ü‡¥ï‡µç‡¥ï‡µÅ‡¥ï">Log Out</a>
                </div>
            </nav>
            <div class="flex-grow flex flex-col justify-center items-center text-center px-4">
                <div class="max-w-4xl">
                    <h1 class="text-5xl md:text-7xl font-extrabold leading-tight mb-6 text-light-text">
                        Automated Sales <span class="text-secondary-cyan">Intelligence</span>
                    </h1>
                    <p class="text-xl md:text-2xl text-subtle-text mb-10 max-w-2xl mx-auto">
                        Transform raw sales call transcripts into structured, CRM-ready data instantly‚Äîeliminating manual work and guaranteeing 100% data quality.
                    </p>
                    <a href="#" class="inline-block px-10 py-4 bg-accent-orange text-dark-bg text-xl font-bold rounded-xl shadow-2xl hover:bg-orange-600 transform hover:scale-[1.02] transition duration-300 ease-in-out primary-btn" id="heroSignupBtn" data-en="Get Started Now" data-hi="‡§Ö‡§≠‡•Ä ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç" data-ta="‡Æá‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡Æ§‡Øä‡Æü‡Æô‡Øç‡Æï‡ØÅ" data-ma="‡¥á‡¥™‡µç‡¥™‡µã‡µæ ‡¥§‡µÅ‡¥ü‡¥ô‡µç‡¥ô‡µÅ‡¥ï">Get Started Now</a>
                    <p class="mt-4 text-sm text-subtle-text/70">Stop losing 1-2 hours per rep, per day.</p>
                </div>
            </div>
        </header>
        <main id="homepage-sections" class="pb-20">
            <section id="about" class="py-20 md:py-24 bg-card-bg">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <h2 class="section-title text-primary-blue" data-en="The Problem We Solve" data-hi="‡§π‡§Æ ‡§ú‡§ø‡§∏ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç" data-ta="‡Æ®‡Ææ‡ÆÆ‡Øç ‡Æ§‡ØÄ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Æø‡Æ∞‡Æö‡Øç‡Æö‡Æ©‡Øà" data-ma="‡¥®‡¥æ‡¥Ç ‡¥™‡¥∞‡¥ø‡¥π‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥® ‡¥™‡µç‡¥∞‡¥∂‡µç‡¥®‡¥Ç">The Problem We Solve</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                        <div class="p-8 rounded-xl bg-gray-800 shadow-2xl border-t-4 border-accent-orange">
                            <p class="text-6xl font-extrabold text-secondary-cyan mb-3">1-2h</p>
                            <h3 class="text-xl font-semibold text-light-text mb-3">Time Wasted Daily</h3>
                            <p class="text-subtle-text">Sales reps are drowning in administrative CRM updates and manual note-taking after every call.</p>
                        </div>
                         <div class="p-8 rounded-xl bg-gray-800 shadow-2xl border-t-4 border-accent-orange">
                            <p class="text-6xl font-extrabold text-secondary-cyan mb-3">40%</p>
                            <h3 class="text-xl font-semibold text-light-text mb-3">Selling Time Lost</h3>
                            <p class="text-subtle-text">Productivity drain consumed by admin tasks rather than high-value customer engagement.</p>
                        </div>
                         <div class="p-8 rounded-xl bg-gray-800 shadow-2xl border-t-4 border-accent-orange">
                            <p class="text-6xl font-extrabold text-secondary-cyan mb-3">60%</p>
                            <h3 class="text-xl font-semibold text-light-text mb-3">Data Accuracy Risk</h3>
                            <p class="text-subtle-text">Information quality suffers when data is rushed, crippling pipeline visibility and forecasting.</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- ----------------------------------------------------------- -->
    <!-- DASHBOARD PAGE: Sales Focused Metrics -->
    <!-- ----------------------------------------------------------- -->
    <div id="dashboard-page" class="page">
        <div class="app-container bg-card-bg shadow-xl">
            <header class="flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 border-b border-gray-700 mb-6">
                <div class="flex items-center space-x-2">
                    <a href="#" onclick="showPage('homepage', this)" class="text-primary-blue hover:text-secondary-cyan text-2xl transition duration-200">
                        <span class="material-icons">home</span>
                    </a>
                    <span class="text-xl font-bold text-secondary-cyan">AI <span class="text-light-text">Sales</span>.</span>
                </div>
                <div class="flex items-center space-x-4 mt-4 sm:mt-0">
                    <select id="languageSelectorDashboard" class="px-3 py-1 rounded-md border border-primary-blue bg-dark-bg text-secondary-cyan font-semibold focus:ring-secondary-cyan focus:border-secondary-cyan transition duration-200">
                        <option value="en">English</option><option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option><option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option><option value="ma">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
                    </select>
                    <div class="text-subtle-text text-sm font-medium">
                        <span id="repDetails"></span>
                        <a href="#" id="logoutBtnApp" class="ml-3 text-primary-blue border border-primary-blue px-3 py-1 rounded-md hover:bg-primary-blue hover:text-light-text transition duration-200" data-en="Log Out" data-hi="‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü" data-ta="‡Æµ‡ØÜ‡Æ≥‡Æø‡ÆØ‡Øá‡Æ±‡ØÅ" data-ma="‡¥™‡µÅ‡¥±‡¥§‡µç‡¥§‡µÅ‡¥ï‡¥ü‡¥ï‡µç‡¥ï‡µÅ‡¥ï">Log Out</a>
                    </div>
                </div>
            </header>
            <h2 class="text-2xl font-bold text-light-text mb-6" data-en="Sales Intelligence Dashboard" data-hi="‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§á‡§Ç‡§ü‡•á‡§≤‡§ø‡§ú‡•á‡§Ç‡§∏ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°" data-ta="‡Æµ‡Æø‡Æ±‡Øç‡Æ™‡Æ©‡Øà ‡Æ®‡ØÅ‡Æ£‡Øç‡Æ£‡Æ±‡Æø‡Æµ‡ØÅ ‡Æü‡Ææ‡Æ∑‡Øç‡Æ™‡Øã‡Æ∞‡Øç‡Æü‡ØÅ" data-ma="‡¥µ‡¥ø‡µΩ‡¥™‡µç‡¥™‡¥® ‡¥á‡µª‡µç‡¥±‡¥≤‡¥ø‡¥ú‡µª‡¥∏‡µç ‡¥°‡¥æ‡¥∑‡µç‚Äå‡¥¨‡µã‡µº‡¥°‡µç">Sales Intelligence Dashboard</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                
                <!-- 1. Pipeline Health Card (formerly Weather) -->
                <div class="p-6 rounded-xl bg-gray-800 shadow-lg border border-gray-700 card hover:border-secondary-cyan transition duration-200">
                    <div class="flex items-center pb-3 mb-4 border-b border-accent-orange/70">
                        <span class="material-icons text-secondary-cyan text-3xl mr-3">trending_up</span>
                        <h3 class="text-light-text text-lg font-bold" data-en="Pipeline Health" data-hi="‡§™‡§æ‡§á‡§™‡§≤‡§æ‡§á‡§® ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø" data-ta="‡Æ™‡Øà‡Æ™‡Æ≤‡Øà‡Æ©‡Øç ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ‡ÆÆ‡Øç" data-ma="‡¥™‡µà‡¥™‡µç‡¥™‡µç‡¥≤‡µà‡µª ‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø‡¥Ç">Pipeline Health</h3>
                    </div>
                    <div class="space-y-3 text-subtle-text">
                        <p class="flex justify-between font-medium" data-en-label="Total Deals" data-hi-label="‡§ï‡•Å‡§≤ ‡§∏‡•å‡§¶‡•á" data-ta-label="‡ÆÆ‡Øä‡Æ§‡Øç‡Æ§ ‡Æí‡Æ™‡Øç‡Æ™‡Æ®‡Øç‡Æ§‡Æô‡Øç‡Æï‡Æ≥‡Øç" data-ma-label="‡¥Æ‡µä‡¥§‡µç‡¥§‡¥Ç ‡¥°‡µÄ‡¥≤‡µÅ‡¥ï‡µæ">Total Deals: <span id="pipelineDeals" class="text-light-text">--</span></p>
                        <p class="flex justify-between font-medium" data-en-label="Avg. Deal Size" data-hi-label="‡§î‡§∏‡§§ ‡§∏‡•å‡§¶‡•á ‡§ï‡§æ ‡§Ü‡§ï‡§æ‡§∞" data-ta-label="‡Æö‡Æ∞‡Ææ‡Æö‡Æ∞‡Æø ‡Æí‡Æ™‡Øç‡Æ™‡Æ®‡Øç‡Æ§ ‡ÆÖ‡Æ≥‡Æµ‡ØÅ" data-ma-label="‡¥∂‡¥∞‡¥æ‡¥∂‡¥∞‡¥ø ‡¥°‡µÄ‡µΩ ‡¥µ‡¥≤‡µÅ‡¥™‡µç‡¥™‡¥Ç">Avg. Deal Size: <span id="avgDealSize" class="text-light-text">--</span></p>
                        <p class="flex justify-between font-medium" data-en-label="Closing Next 30 Days" data-hi-label="‡§Ö‡§ó‡§≤‡•á 30 ‡§¶‡§ø‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¨‡§Ç‡§¶ ‡§π‡•ã‡§ó‡§æ" data-ta-label="‡ÆÖ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§ 30 ‡Æ®‡Ææ‡Æü‡Øç‡Æï‡Æ≥‡Æø‡Æ≤‡Øç ‡ÆÆ‡ØÅ‡Æü‡Æø‡Æµ‡Æü‡Øà‡Æï‡Æø‡Æ±‡Æ§‡ØÅ" data-ma-label="‡¥Ö‡¥ü‡µÅ‡¥§‡µç‡¥§ 30 ‡¥¶‡¥ø‡¥µ‡¥∏‡¥§‡µç‡¥§‡¥ø‡¥®‡µÅ‡¥≥‡µç‡¥≥‡¥ø‡µΩ ‡¥ï‡µç‡¥≤‡µã‡¥∏‡¥ø‡¥Ç‡¥ó‡µç">Closing Next 30 Days: <span id="closing30Days" class="text-light-text">--</span></p>
                    </div>
                    <div class="mt-4 text-sm text-subtle-text">
                        <h4 class="text-primary-blue text-base font-semibold mb-2" data-en="Next Milestones" data-hi="‡§Ö‡§ó‡§≤‡•á ‡§Æ‡•Ä‡§≤ ‡§ï‡•á ‡§™‡§§‡•ç‡§•‡§∞" data-ta="‡ÆÖ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§ ‡ÆÆ‡Øà‡Æ≤‡Øç‡Æï‡Æ±‡Øç‡Æï‡Æ≥‡Øç" data-ma="‡¥Ö‡¥ü‡µÅ‡¥§‡µç‡¥§ ‡¥®‡¥æ‡¥¥‡¥ø‡¥ï‡¥ï‡µç‡¥ï‡¥≤‡µç‡¥≤‡µÅ‡¥ï‡µæ">Next Milestones</h4>
                        <ul id="milestoneList" class="space-y-1 list-none p-0"></ul>
                    </div>
                </div>

                <!-- 2. Deal Velocity Card (formerly Crop Progress) -->
                <div class="p-6 rounded-xl bg-gray-800 shadow-lg border border-gray-700 card hover:border-secondary-cyan transition duration-200">
                    <div class="flex items-center pb-3 mb-4 border-b border-accent-orange/70">
                        <span class="material-icons text-secondary-cyan text-3xl mr-3">speed</span>
                        <h3 class="text-light-text text-lg font-bold" data-en="Deal Velocity" data-hi="‡§∏‡•å‡§¶‡•á ‡§ï‡•Ä ‡§ó‡§§‡§ø" data-ta="‡Æí‡Æ™‡Øç‡Æ™‡Æ®‡Øç‡Æ§ ‡Æµ‡Øá‡Æï‡ÆÆ‡Øç" data-ma="‡¥°‡µÄ‡µΩ ‡¥µ‡µá‡¥ó‡¥§">Deal Velocity</h3>
                    </div>
                    <div class="space-y-3 text-subtle-text">
                        <p class="flex justify-between font-medium" data-en-label="Avg. Stage Duration" data-hi-label="‡§î‡§∏‡§§ ‡§ö‡§∞‡§£ ‡§Ö‡§µ‡§ß‡§ø" data-ta-label="‡Æö‡Æ∞‡Ææ‡Æö‡Æ∞‡Æø ‡Æ®‡Æø‡Æ≤‡Øà ‡Æ®‡ØÄ‡Æ≥‡ÆÆ‡Øç" data-ma-label="‡¥∂‡¥∞‡¥æ‡¥∂‡¥∞‡¥ø ‡¥ò‡¥ü‡µç‡¥ü ‡¥¶‡µà‡µº‡¥ò‡µç‡¥Ø‡¥Ç">Avg. Stage Duration: <span id="avgStageDuration" class="text-light-text">--</span></p>
                        <p class="flex justify-between font-medium" data-en-label="Current Stage" data-hi-label="‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§ö‡§∞‡§£" data-ta-label="‡Æ§‡Æ±‡Øç‡Æ™‡Øã‡Æ§‡Øà‡ÆØ ‡Æ®‡Æø‡Æ≤‡Øà" data-ma-label="‡¥®‡¥ø‡¥≤‡¥µ‡¥ø‡¥≤‡µÜ ‡¥ò‡¥ü‡µç‡¥ü‡¥Ç">Current Stage: <span id="currentStageValue" class="text-light-text">--</span></p>
                        <div class="h-2 bg-gray-700 rounded-full mt-4 overflow-hidden">
                            <div id="dealVelocityBar" class="h-full bg-secondary-cyan" style="width: 0%;"></div>
                        </div>
                        <p class="text-xs pt-2" data-en="Time remaining in current sales stage." data-hi="‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§ö‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§∂‡•á‡§∑ ‡§∏‡§Æ‡§Ø‡•§" data-ta="‡Æ§‡Æ±‡Øç‡Æ™‡Øã‡Æ§‡Øà‡ÆØ ‡Æµ‡Æø‡Æ±‡Øç‡Æ™‡Æ©‡Øà ‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Æø‡Æ≤‡Øç ‡ÆÆ‡ØÄ‡Æ§‡ÆÆ‡ØÅ‡Æ≥‡Øç‡Æ≥ ‡Æ®‡Øá‡Æ∞‡ÆÆ‡Øç." data-ma="‡¥®‡¥ø‡¥≤‡¥µ‡¥ø‡¥≤‡µÜ ‡¥µ‡¥ø‡µΩ‡¥™‡µç‡¥™‡¥® ‡¥ò‡¥ü‡µç‡¥ü‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥∂‡µá‡¥∑‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥® ‡¥∏‡¥Æ‡¥Ø‡¥Ç.">Time remaining in current sales stage.</p>
                    </div>
                </div>

                <!-- 3. CRM Data Score Card (formerly Water Stress) -->
                <div class="p-6 rounded-xl bg-gray-800 shadow-lg border border-gray-700 card hover:border-secondary-cyan transition duration-200">
                    <div class="flex items-center pb-3 mb-4 border-b border-accent-orange/70">
                        <span class="material-icons text-secondary-cyan text-3xl mr-3">verified_user</span>
                        <h3 class="text-light-text text-lg font-bold" data-en="CRM Data Integrity" data-hi="‡§∏‡•Ä‡§Ü‡§∞‡¥é‡¥Ç ‡§°‡•á‡§ü‡§æ ‡§Ö‡§ñ‡§Ç‡§°‡§§‡§æ" data-ta="CRM ‡Æ§‡Æ∞‡Æµ‡ØÅ ‡Æí‡Æ∞‡ØÅ‡ÆÆ‡Øà‡Æ™‡Øç‡Æ™‡Ææ‡Æü‡ØÅ" data-ma="CRM ‡¥°‡¥æ‡¥±‡µç‡¥±‡¥æ ‡¥∏‡¥Æ‡¥ó‡µç‡¥∞‡¥§">CRM Data Integrity</h3>
                    </div>
                    <div class="space-y-3 text-subtle-text">
                        <p class="flex justify-between font-medium" data-en-label="Overall Score" data-hi-label="‡§∏‡§Æ‡§ó‡•ç‡§∞ ‡§∏‡•ç‡§ï‡•ã‡§∞" data-ta-label="‡Æí‡Æü‡Øç‡Æü‡ØÅ‡ÆÆ‡Øä‡Æ§‡Øç‡Æ§ ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÜ‡Æ£‡Øç" data-ma-label="‡¥Æ‡µä‡¥§‡µç‡¥§‡¥§‡µç‡¥§‡¥ø‡¥≤‡µÅ‡¥≥‡µç‡¥≥ ‡¥∏‡µç‡¥ï‡µã‡µº">Overall Score: <span id="integrityScore" class="text-light-text">--</span></p>
                        <p class="flex justify-between font-medium" data-en-label="Accuracy Risk" data-hi-label="‡§∏‡§ü‡•Ä‡§ï‡§§‡§æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ" data-ta-label="‡Æ§‡ØÅ‡Æ≤‡Øç‡Æ≤‡Æø‡ÆØ‡ÆÆ‡Øç ‡Æá‡Æü‡Æ∞‡Øç" data-ma-label="‡¥ï‡µÉ‡¥§‡µç‡¥Ø‡¥§ ‡¥Ö‡¥™‡¥ï‡¥ü‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥§">Accuracy Risk: <span id="accuracyRisk" data-risk-key="Low" class="text-light-text">--</span></p>
                        <div class="h-2 bg-gray-700 rounded-full mt-4 overflow-hidden">
                            <div id="dataIntegrityBar" class="h-full bg-primary-blue" style="width: 0%;"></div>
                        </div>
                    </div>
                    <p id="dataAdvice" class="mt-4 p-3 rounded-lg bg-primary-blue/30 text-light-text text-sm font-medium border-l-4 border-secondary-cyan"></p>
                </div>

                <!-- 4. Top Alerts Card -->
                <div class="p-6 rounded-xl bg-gray-800 shadow-lg border border-gray-700 card lg:col-span-2 hover:border-secondary-cyan transition duration-200">
                    <div class="flex items-center pb-3 mb-4 border-b border-accent-orange/70">
                        <span class="material-icons text-secondary-cyan text-3xl mr-3">notifications_active</span>
                        <h3 class="text-light-text text-lg font-bold" data-en="Priority Alerts & Coaching" data-hi="‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§î‡§∞ ‡§ï‡•ã‡§ö‡§ø‡§Ç‡§ó" data-ta="‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ©‡ØÅ‡Æ∞‡Æø‡ÆÆ‡Øà ‡Æµ‡Æø‡Æ¥‡Æø‡Æ™‡Øç‡Æ™‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø" data-ma="‡¥Æ‡µÅ‡µª‡¥ó‡¥£‡¥® ‡¥Ö‡¥≤‡µá‡µº‡¥ü‡µç‡¥ü‡µÅ‡¥ï‡¥≥‡µÅ‡¥Ç ‡¥ï‡µã‡¥ö‡µç‡¥ö‡¥ø‡¥Ç‡¥ó‡µÅ‡¥Ç">Priority Alerts & Coaching</h3>
                    </div>
                    <ul id="alertsList" class="list-none p-0 space-y-3 text-subtle-text">
                        <!-- Alerts will be dynamically added here -->
                    </ul>
                </div>

                <!-- 5. Atlas AI CTA Card -->
                <div class="p-6 rounded-xl bg-gray-800 shadow-lg border border-gray-700 card flex flex-col justify-between ai-cta-card hover:border-secondary-cyan transition duration-200">
                    <div class="flex items-center pb-3 mb-4 border-b border-accent-orange/70">
                        <span class="material-icons text-secondary-cyan text-3xl mr-3">smart_toy</span>
                        <h3 class="text-light-text text-lg font-bold" data-en="Atlas AI Assistant" data-hi="‡§è‡§ü‡§≤‡§∏ ‡§è‡§Ü‡§à ‡§∏‡§π‡§æ‡§Ø‡§ï" data-ta="‡ÆÖ‡Æü‡Øç‡Æ≤‡Æ∏‡Øç AI ‡Æâ‡Æ§‡Æµ‡Æø‡ÆØ‡Ææ‡Æ≥‡Æ∞‡Øç" data-ma="‡¥Ö‡¥±‡µç‡¥±‡µç‡¥≤‡¥∏‡µç AI ‡¥Ö‡¥∏‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µª‡µç‡¥±‡µç">Atlas AI Assistant</h3>
                    </div>
                    <p class="text-subtle-text mb-4" data-en="Get real-time feedback on your transcripts, ask for sales strategies, or instantly summarize complex calls." data-hi="‡§Ö‡§™‡§®‡•á ‡§™‡•ç‡§∞‡§§‡§ø‡§≤‡•á‡§ñ‡•ã‡§Ç ‡§™‡§∞ ‡§∞‡•Ä‡§Ø‡§≤-‡§ü‡§æ‡§á‡§Æ ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç, ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§∞‡§£‡§®‡•Ä‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•Ç‡§õ‡•á‡§Ç, ‡§Ø‡§æ ‡§ú‡§ü‡§ø‡§≤ ‡§ï‡•â‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§∏‡§Ç‡§ï‡•ç‡§∑‡•á‡§™ ‡§Æ‡•á‡§Ç ‡§¨‡§§‡§æ‡§è‡§Ç‡•§" data-ta="‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æü‡Æø‡Æ∞‡Ææ‡Æ©‡Øç‡Æ∏‡Øç‡Æï‡Æø‡Æ∞‡Æø‡Æ™‡Øç‡Æü‡ØÅ‡Æï‡Æ≥‡Æø‡Æ≤‡Øç ‡Æ®‡Æø‡Æï‡Æ¥‡Øç‡Æ®‡Øá‡Æ∞ ‡Æ™‡Æø‡Æ©‡Øç‡Æ©‡ØÇ‡Æü‡Øç‡Æü‡ÆÆ‡Øç ‡Æ™‡ØÜ‡Æ±‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æµ‡Æø‡Æ±‡Øç‡Æ™‡Æ©‡Øà ‡Æâ‡Æ§‡Øç‡Æ§‡Æø‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Øá‡Æü‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æö‡Æø‡Æï‡Øç‡Æï‡Æ≤‡Ææ‡Æ© ‡ÆÖ‡Æ¥‡Øà‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øà ‡Æâ‡Æü‡Æ©‡Æü‡Æø‡ÆØ‡Ææ‡Æï ‡Æö‡ØÅ‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç." data-ma="‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥ü‡µç‡¥∞‡¥æ‡µª‡¥∏‡µç‡¥ï‡µç‡¥∞‡¥ø‡¥™‡µç‡¥±‡µç‡¥±‡µÅ‡¥ï‡¥≥‡¥ø‡µΩ ‡¥§‡¥§‡µç‡¥∏‡¥Æ‡¥Ø ‡¥´‡µÄ‡¥°‡µç‚Äå‡¥¨‡¥æ‡¥ï‡µç‡¥ï‡µç ‡¥®‡µá‡¥ü‡µÅ‡¥ï, ‡¥µ‡¥ø‡µΩ‡¥™‡µç‡¥™‡¥® ‡¥§‡¥®‡µç‡¥§‡µç‡¥∞‡¥ô‡µç‡¥ô‡µæ ‡¥ö‡µã‡¥¶‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï, ‡¥Ö‡¥≤‡µç‡¥≤‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ ‡¥∏‡¥ô‡µç‡¥ï‡µÄ‡µº‡¥£‡µç‡¥£‡¥Æ‡¥æ‡¥Ø ‡¥ï‡µã‡¥≥‡µÅ‡¥ï‡µæ ‡¥§‡µΩ‡¥ï‡µç‡¥∑‡¥£‡¥Ç ‡¥∏‡¥Ç‡¥ó‡µç‡¥∞‡¥π‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï.">Get real-time feedback on your transcripts, ask for sales strategies, or instantly summarize complex calls.</p>
                    <a href="#" onclick="showPage('ai-page')" class="py-3 bg-accent-orange text-dark-bg text-lg font-bold rounded-lg shadow-xl hover:bg-orange-600 transition duration-300 transform hover:scale-[1.01] text-center action-button" data-en="Launch Atlas Chat" data-hi="‡§è‡§ü‡§≤‡§∏ ‡§ö‡•à‡§ü ‡§≤‡•â‡§®‡•ç‡§ö ‡§ï‡§∞‡•á‡§Ç" data-ta="‡ÆÖ‡Æü‡Øç‡Æ≤‡Æ∏‡Øç ‡ÆÖ‡Æ∞‡Æü‡Øç‡Æü‡Øà‡ÆØ‡Øà ‡Æ§‡Øä‡Æü‡Æô‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç" data-ma="‡¥Ö‡¥±‡µç‡¥±‡µç‡¥≤‡¥∏‡µç ‡¥ö‡¥æ‡¥±‡µç‡¥±‡µç ‡¥∏‡¥Æ‡¥æ‡¥∞‡¥Ç‡¥≠‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï">Launch Atlas Chat</a>
                </div>

                <!-- 6. Revenue Projection Chart (formerly Market Chart) -->
                <div class="p-6 rounded-xl bg-gray-800 shadow-lg border border-gray-700 card hover:border-secondary-cyan transition duration-200">
                    <div class="flex items-center pb-3 mb-4 border-b border-accent-orange/70">
                        <span class="material-icons text-secondary-cyan text-3xl mr-3">query_stats</span>
                        <h3 class="text-light-text text-lg font-bold" data-en="Revenue Trend" data-hi="‡§∞‡§æ‡§ú‡§∏‡•ç‡§µ ‡§™‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø" data-ta="‡Æµ‡Æ∞‡ØÅ‡Æµ‡Ææ‡ÆØ‡Øç ‡Æ™‡Øã‡Æï‡Øç‡Æï‡ØÅ" data-ma="‡¥µ‡¥∞‡µÅ‡¥Æ‡¥æ‡¥® ‡¥ü‡µç‡¥∞‡µÜ‡µª‡¥°‡µç">Revenue Trend</h3>
                    </div>
                    <p class="text-subtle-text mb-2" data-en-label="Current Pipeline Value" data-hi-label="‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§™‡§æ‡§á‡§™‡§≤‡§æ‡§á‡§® ‡§Æ‡•Ç‡§≤‡•ç‡§Ø" data-ta-label="‡Æ§‡Æ±‡Øç‡Æ™‡Øã‡Æ§‡Øà‡ÆØ ‡Æ™‡Øà‡Æ™‡Æ≤‡Øà‡Æ©‡Øç ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÅ" data-ma-label="‡¥®‡¥ø‡¥≤‡¥µ‡¥ø‡¥≤‡µÜ ‡¥™‡µà‡¥™‡µç‡¥™‡µç‡¥≤‡µà‡µª ‡¥Æ‡µÇ‡¥≤‡µç‡¥Ø‡¥Ç">Current Pipeline Value: <span id="currentPipelineValue" class="text-light-text font-semibold">--</span></p>
                    <div class="h-40 chart-container">
                        <canvas id="revenueChart"></canvas>
                    </div>
                    <p id="coachingInsight" data-advice-key="1" class="mt-4 p-3 rounded-lg bg-gray-700 text-subtle-text text-sm font-medium border-l-4 border-primary-blue"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- ----------------------------------------------------------- -->
    <!-- AI CHAT PAGE: Atlas Assistant -->
    <!-- ----------------------------------------------------------- -->
    <div id="ai-page" class="page">
        <div class="min-h-screen flex flex-col">
            <header class="bg-primary-blue p-5 flex justify-between items-center text-light-text shadow-lg">
                <a href="#" onclick="showPage('dashboard-page', this)" class="flex items-center text-light-text hover:text-secondary-cyan transition duration-200">
                    <span class="material-icons mr-2">arrow_back</span> <span class="hidden sm:inline" data-en="Back to Dashboard" data-hi="‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏" data-ta="‡Æü‡Ææ‡Æ∑‡Øç‡Æ™‡Øã‡Æ∞‡Øç‡Æü‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ" data-ma="‡¥°‡¥æ‡¥∑‡µç‚Äå‡¥¨‡µã‡µº‡¥°‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥Æ‡¥ü‡¥ô‡µç‡¥ô‡µÅ‡¥ï">Back to Dashboard</span>
                </a>
                <h2 class="text-2xl font-bold hidden md:block">Atlas AI Advisor</h2>
                <div class="flex items-center space-x-4">
                    <select id="languageSelectorAi" class="px-3 py-1 rounded-md border border-light-text/30 bg-primary-blue/50 text-light-text font-semibold hover:bg-secondary-cyan transition duration-200 focus:ring-secondary-cyan focus:border-secondary-cyan">
                        <option value="en">English</option><option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option><option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option><option value="ma">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
                    </select>
                    <div class="px-3 py-1 rounded-full text-sm font-semibold ai-status bg-primary-blue/70">
                        <span id="aiStatus" class="status online">Online</span>
                    </div>
                </div>
            </header>
            <div id="chatBox" class="flex-grow overflow-y-auto p-4 space-y-4"></div>
            <div class="p-4 flex items-center border-t border-gray-700 bg-card-bg">
                <input type="text" id="textInput" placeholder="Ask Atlas for coaching, summaries, or insights..." class="flex-grow p-3 rounded-full border border-gray-700 mr-3 text-light-text bg-dark-bg focus:border-secondary-cyan focus:ring-1 focus:ring-secondary-cyan transition duration-200">
                <button id="voiceBtn" class="text-primary-blue hover:text-accent-orange text-3xl transition duration-200"><span class="material-icons">mic</span></button>
                <button id="sendBtn" class="ml-3 text-primary-blue hover:text-accent-orange text-3xl transition duration-200"><span class="material-icons">send</span></button>
            </div>
        </div>
    </div>

    <!-- ----------------------------------------------------------- -->
    <!-- TRANSCRIPT ANALYSIS PAGE (formerly Diagnosis) -->
    <!-- ----------------------------------------------------------- -->
    <div id="transcript-analysis-page" class="page">
        <div class="app-container bg-card-bg shadow-xl">
            <header class="flex items-center justify-between p-4 border-b border-gray-700 mb-6">
                <div class="flex items-center space-x-2">
                    <a href="#" onclick="showPage('dashboard-page', this)" class="text-primary-blue hover:text-secondary-cyan text-2xl transition duration-200">
                        <span class="material-icons">arrow_back</span>
                    </a>
                    <span class="text-xl font-bold text-secondary-cyan">AI <span class="text-light-text">Sales</span>.</span>
                </div>
                <h2 class="text-2xl font-bold text-light-text" data-en="Transcript Analysis Tool" data-hi="‡§™‡•ç‡§∞‡§§‡§ø‡§≤‡•á‡§ñ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§â‡§™‡§ï‡§∞‡§£" data-ta="‡Æü‡Æø‡Æ∞‡Ææ‡Æ©‡Øç‡Æ∏‡Øç‡Æï‡Æø‡Æ∞‡Æø‡Æ™‡Øç‡Æü‡Øç ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æï‡Æ∞‡ØÅ‡Æµ‡Æø" data-ma="‡¥ü‡µç‡¥∞‡¥æ‡µª‡¥∏‡µç‡¥ï‡µç‡¥∞‡¥ø‡¥™‡µç‡¥±‡µç‡¥±‡µç ‡¥µ‡¥ø‡¥∂‡¥ï‡¥≤‡¥® ‡¥â‡¥™‡¥ï‡¥∞‡¥£‡¥Ç">Transcript Analysis Tool</h2>
            </header>
            <section class="space-y-6">
                <p class="text-subtle-text" data-en="Paste your raw sales call transcript below for instant analysis. Atlas will extract key data points, pain points, budget signals, and sentiment." data-hi="‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡•Ä ‡§ï‡§ö‡•ç‡§ö‡•Ä ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§ï‡•â‡§≤ ‡§™‡•ç‡§∞‡§§‡§ø‡§≤‡•á‡§ñ ‡§®‡•Ä‡§ö‡•á ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§è‡§ü‡§≤‡§∏ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§°‡•á‡§ü‡§æ ‡§¨‡§ø‡§Ç‡§¶‡•Å‡§ì‡§Ç, ‡§¶‡§∞‡•ç‡§¶ ‡§¨‡§ø‡§Ç‡§¶‡•Å‡§ì‡§Ç, ‡§¨‡§ú‡§ü ‡§∏‡§Ç‡§ï‡•á‡§§‡•ã‡§Ç ‡§î‡§∞ ‡§≠‡§æ‡§µ‡§®‡§æ ‡§ï‡•ã ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§ó‡§æ‡•§" data-ta="‡Æâ‡Æü‡Æ©‡Æü‡Æø ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡ØÇ‡Æ≤ ‡Æµ‡Æø‡Æ±‡Øç‡Æ™‡Æ©‡Øà ‡ÆÖ‡Æ¥‡Øà‡Æ™‡Øç‡Æ™‡ØÅ ‡Æü‡Æø‡Æ∞‡Ææ‡Æ©‡Øç‡Æ∏‡Øç‡Æï‡Æø‡Æ∞‡Æø‡Æ™‡Øç‡Æü‡Øà ‡Æï‡ØÄ‡Æ¥‡Øá ‡Æí‡Æü‡Øç‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡ÆÖ‡Æü‡Øç‡Æ≤‡Æ∏‡Øç ‡ÆÆ‡ØÅ‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æ§‡Æ∞‡Æµ‡ØÅ ‡Æ™‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æø‡Æï‡Æ≥‡Øç, ‡Æµ‡Æ≤‡Æø ‡Æ™‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æø‡Æï‡Æ≥‡Øç, ‡Æ™‡Æü‡Øç‡Æú‡ØÜ‡Æü‡Øç ‡Æö‡Æø‡Æï‡Øç‡Æ©‡Æ≤‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æ£‡Æ∞‡Øç‡Æµ‡ØÅ‡Æï‡Æ≥‡Øà ‡Æ™‡Æø‡Æ∞‡Æø‡Æ§‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç." data-ma="‡¥§‡µΩ‡¥ï‡µç‡¥∑‡¥£ ‡¥µ‡¥ø‡¥∂‡¥ï‡¥≤‡¥®‡¥§‡µç‡¥§‡¥ø‡¥®‡¥æ‡¥Ø‡¥ø ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥Ö‡¥∏‡¥Ç‡¥∏‡µç‡¥ï‡µÉ‡¥§ ‡¥µ‡¥ø‡µΩ‡¥™‡µç‡¥™‡¥® ‡¥ï‡µã‡µæ ‡¥ü‡µç‡¥∞‡¥æ‡µª‡¥∏‡µç‡¥ï‡µç‡¥∞‡¥ø‡¥™‡µç‡¥±‡µç‡¥±‡µç ‡¥§‡¥æ‡¥¥‡µÜ ‡¥í‡¥ü‡µç‡¥ü‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï. ‡¥™‡µç‡¥∞‡¥ß‡¥æ‡¥® ‡¥°‡¥æ‡¥±‡µç‡¥±‡¥æ ‡¥™‡µã‡¥Ø‡¥ø‡µª‡µç‡¥±‡µÅ‡¥ï‡µæ, ‡¥µ‡µá‡¥¶‡¥® ‡¥™‡µã‡¥Ø‡¥ø‡µª‡µç‡¥±‡µÅ‡¥ï‡µæ, ‡¥¨‡¥°‡µç‡¥ú‡¥±‡µç‡¥±‡µç ‡¥∏‡¥ø‡¥ó‡µç‡¥®‡¥≤‡µÅ‡¥ï‡µæ, ‡¥µ‡¥ø‡¥ï‡¥æ‡¥∞‡¥Ç ‡¥é‡¥®‡µç‡¥®‡¥ø‡¥µ ‡¥Ö‡¥±‡µç‡¥±‡µç‡¥≤‡¥∏‡µç ‡¥µ‡µá‡µº‡¥§‡¥ø‡¥∞‡¥ø‡¥ö‡µç‡¥ö‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥Ç.">Paste your raw sales call transcript below for instant analysis. Atlas will extract key data points, pain points, budget signals, and sentiment.</p>
                
                <textarea id="transcriptInput" rows="8" placeholder="Paste full call transcript here (Speaker A: ..., Speaker B: ...)" class="w-full p-3 rounded-lg bg-dark-bg border border-gray-700 text-light-text focus:border-secondary-cyan focus:ring-1 focus:ring-secondary-cyan transition duration-200"></textarea>
                
                <button onclick="runAnalysis()" class="w-full py-3 bg-accent-orange text-dark-bg font-bold rounded-lg hover:bg-orange-600 transition duration-300 action-button" data-en="Run Analysis" data-hi="‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ö‡§≤‡§æ‡§è‡§Å" data-ta="‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡Øà ‡Æá‡ÆØ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç" data-ma="‡¥µ‡¥ø‡¥∂‡¥ï‡¥≤‡¥®‡¥Ç ‡¥™‡µç‡¥∞‡¥µ‡µº‡¥§‡µç‡¥§‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï">Run Analysis</button>

                <p id="analysisLoading" class="text-center font-semibold text-secondary-cyan" style="display: none;">
                    <span class="material-icons spin-animation align-middle mr-2">sync</span> 
                    <span data-en="Processing transcript and structuring data. Please wait..." data-hi="‡§™‡•ç‡§∞‡§§‡§ø‡§≤‡•á‡§ñ ‡§ï‡•ã ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à ‡§î‡§∞ ‡§°‡•á‡§ü‡§æ ‡§∏‡§Ç‡§∞‡§ö‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç..." data-ta="‡Æü‡Æø‡Æ∞‡Ææ‡Æ©‡Øç‡Æ∏‡Øç‡Æï‡Æø‡Æ∞‡Æø‡Æ™‡Øç‡Æü‡Øà ‡Æö‡ØÜ‡ÆØ‡Æ≤‡Ææ‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Æ∞‡Æµ‡Øà ‡Æï‡Æü‡Øç‡Æü‡ÆÆ‡Øà‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ. ‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æï‡Ææ‡Æ§‡Øç‡Æ§‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç..." data-ma="‡¥ü‡µç‡¥∞‡¥æ‡µª‡¥∏‡µç‡¥∏‡µç‡¥ï‡µç‡¥∞‡¥ø‡¥™‡µç‡¥±‡µç‡¥±‡µç ‡¥™‡µç‡¥∞‡µã‡¥∏‡¥∏‡µç‡¥∏‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡µÅ, ‡¥°‡¥æ‡¥±‡µç‡¥± ‡¥ò‡¥ü‡¥®‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§‡µÅ‡¥®‡µç‡¥®‡µÅ. ‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥ï‡¥æ‡¥§‡µç‡¥§‡¥ø‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï...">Processing transcript and structuring data. Please wait...</span>
                </p>
                
                <div id="analysisResult" class="p-6 mt-6 rounded-xl bg-gray-900 border-l-4 border-accent-orange shadow-lg" style="display: none;">
                    
                    <!-- Structured JSON Output Mockup (New Enhancement) -->
                    <h4 class="text-xl font-bold mb-3 text-secondary-cyan" data-en="Structured CRM Data Output" data-hi="‡§∏‡§Ç‡§∞‡§ö‡§ø‡§§ ‡§∏‡•Ä‡§Ü‡§∞‡¥é‡¥Ç ‡§°‡•á‡§ü‡§æ ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü" data-ta="‡Æï‡Æü‡Øç‡Æü‡ÆÆ‡Øà‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü CRM ‡Æ§‡Æ∞‡Æµ‡ØÅ ‡Æµ‡ØÜ‡Æ≥‡Æø‡ÆØ‡ØÄ‡Æü‡ØÅ" data-ma="‡¥ò‡¥ü‡¥®‡¥Ø‡µÅ‡¥≥‡µç‡¥≥ CRM ‡¥°‡¥æ‡¥±‡µç‡¥±‡¥æ ‡¥î‡¥ü‡µç‡¥ü‡µç‡¥™‡µÅ‡¥ü‡µç‡¥ü‡µç">Structured CRM Data Output:</h4>
                    <pre id="jsonOutput" class="p-3 bg-dark-bg border border-gray-700 rounded-lg overflow-x-auto text-sm text-green-400 font-mono mb-6"></pre>
                    
                    <h4 id="resultTitle" class="text-lg font-bold mb-3 text-accent-orange">Transcript Summary:</h4>
                    <p id="resultSummary" class="text-subtle-text italic mb-4"></p>
                    
                    <h4 class="text-lg font-bold mt-4 text-primary-blue" data-en="Key Extracted Fields" data-hi="‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§®‡§ø‡§ï‡§æ‡§≤‡•á ‡§ó‡§è ‡§´‡§º‡µÄ‡§≤‡•ç‡§°" data-ta="‡ÆÆ‡ØÅ‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æ™‡Æø‡Æ∞‡Æø‡Æ§‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü ‡Æ™‡ØÅ‡Æ≤‡Æô‡Øç‡Æï‡Æ≥‡Øç" data-ma="‡¥™‡µç‡¥∞‡¥ß‡¥æ‡¥® ‡¥µ‡µá‡µº‡¥§‡¥ø‡¥∞‡¥ø‡¥ö‡µç‡¥ö‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§ ‡¥´‡µÄ‡µΩ‡¥°‡µÅ‡¥ï‡µæ">Key Extracted Fields:</h4>
                    <ul id="extractedFields" class="list-disc pl-5 text-light-text space-y-1 mt-2 text-sm"></ul>
                    
                    <a href="#" onclick="showPage('ai-page')" class="mt-6 py-3 px-6 bg-secondary-cyan text-dark-bg font-bold rounded-lg hover:bg-primary-blue transition duration-300 transform hover:scale-[1.01] inline-block text-center action-button small-btn" data-en="Ask Atlas for Coaching" data-hi="‡§ï‡•ã‡§ö‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ü‡§≤‡§∏ ‡§∏‡•á ‡§™‡•Ç‡§õ‡•á‡§Ç" data-ta="‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡ØÅ ‡ÆÖ‡Æü‡Øç‡Æ≤‡Æ∏‡Æø‡Æü‡ÆÆ‡Øç ‡Æï‡Øá‡Æü‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç" data-ma="‡¥ï‡µã‡¥ö‡µç‡¥ö‡¥ø‡¥Ç‡¥ó‡¥ø‡¥®‡¥æ‡¥Ø‡¥ø ‡¥Ö‡¥±‡µç‡¥±‡µç‡¥≤‡¥∏‡¥ø‡¥®‡µã‡¥ü‡µç ‡¥ö‡µã‡¥¶‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï">Ask Atlas for Coaching</a>
                </div>
            </section>
        </div>
    </div>
    
    <!-- Empty pages placeholder for navigation structure -->
    <div id="transcript-library-page" class="page">
        <div class="app-container bg-card-bg shadow-xl">
             <header class="flex items-center justify-between p-4 border-b border-gray-700 mb-6">
                <div class="flex items-center space-x-2">
                    <a href="#" onclick="showPage('dashboard-page', this)" class="text-primary-blue hover:text-secondary-cyan text-2xl transition duration-200">
                        <span class="material-icons">arrow_back</span>
                    </a>
                    <span class="text-xl font-bold text-secondary-cyan">AI <span class="text-light-text">Sales</span>.</span>
                </div>
                <h2 class="text-2xl font-bold text-light-text" data-en="Transcript Library" data-hi="‡§™‡•ç‡§∞‡§§‡§ø‡§≤‡•á‡§ñ ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§æ‡§≤‡§Ø" data-ta="‡Æü‡Æø‡Æ∞‡Ææ‡Æ©‡Øç‡Æ∏‡Øç‡Æï‡Æø‡Æ∞‡Æø‡Æ™‡Øç‡Æü‡Øç ‡Æ®‡ØÇ‡Æ≤‡Æï‡ÆÆ‡Øç" data-ma="‡¥ü‡µç‡¥∞‡¥æ‡µª‡¥∏‡µç‡¥ï‡µç‡¥∞‡¥ø‡¥™‡µç‡¥±‡µç‡¥±‡µç ‡¥≤‡µà‡¥¨‡µç‡¥∞‡¥±‡¥ø">Transcript Library</h2>
            </header>
            <p class="text-subtle-text" data-en="This page displays all processed transcripts and their extracted data points. (Mock Content)" data-hi="‡§Ø‡§π ‡§™‡•É‡§∑‡•ç‡§† ‡§∏‡§≠‡•Ä ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§ø‡§§ ‡§™‡•ç‡§∞‡§§‡§ø‡§≤‡•á‡§ñ‡•ã‡§Ç ‡§î‡§∞ ‡§â‡§®‡§ï‡•á ‡§®‡§ø‡§ï‡§æ‡§≤‡•á ‡§ó‡§è ‡§°‡•á‡§ü‡§æ ‡§¨‡§ø‡§Ç‡§¶‡•Å‡§ì‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ (‡§Æ‡•â‡§ï ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä)" data-ta="‡Æá‡Æ®‡Øç‡Æ§ ‡Æ™‡Æï‡Øç‡Æï‡ÆÆ‡Øç ‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Æ≤‡Ææ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü ‡Æü‡Æø‡Æ∞‡Ææ‡Æ©‡Øç‡Æ∏‡Øç‡Æï‡Æø‡Æ∞‡Æø‡Æ™‡Øç‡Æü‡ØÅ‡Æï‡Æ≥‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡ÆÖ‡Æµ‡Æ±‡Øç‡Æ±‡Æø‡Æ©‡Øç ‡Æ™‡Æø‡Æ∞‡Æø‡Æ§‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü ‡Æ§‡Æ∞‡Æµ‡ØÅ ‡Æ™‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æø‡Æï‡Æ≥‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æï‡Ææ‡Æü‡Øç‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ. (‡Æ™‡Øã‡Æ≤‡Æø ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æü‡Æï‡Øç‡Æï‡ÆÆ‡Øç)" data-ma="‡¥à ‡¥™‡µá‡¥ú‡µç ‡¥™‡µç‡¥∞‡µã‡¥∏‡¥∏‡µç‡¥∏‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥§ ‡¥é‡¥≤‡µç‡¥≤‡¥æ ‡¥ü‡µç‡¥∞‡¥æ‡µª‡¥∏‡µç‡¥ï‡µç‡¥∞‡¥ø‡¥™‡µç‡¥±‡µç‡¥±‡µÅ‡¥ï‡¥≥‡µÅ‡¥Ç ‡¥Ö‡¥µ‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥µ‡µá‡µº‡¥§‡¥ø‡¥∞‡¥ø‡¥ö‡µç‡¥ö‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§ ‡¥°‡¥æ‡¥±‡µç‡¥±‡¥æ ‡¥™‡µã‡¥Ø‡¥ø‡µª‡µç‡¥±‡µÅ‡¥ï‡¥≥‡µÅ‡¥Ç ‡¥™‡µç‡¥∞‡¥¶‡µº‡¥∂‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ. (‡¥Æ‡µã‡¥ï‡µç‡¥ï‡µç ‡¥â‡¥≥‡µç‡¥≥‡¥ü‡¥ï‡µç‡¥ï‡¥Ç)">This page displays all processed transcripts and their extracted data points. (Mock Content)</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6" id="transcriptGrid">
                <!-- Content will be dynamically generated here -->
            </div>
        </div>
    </div>
    
    <!-- Mock Resource page structure for completeness -->
    <div id="resources-page" class="page">
        <div class="app-container bg-card-bg shadow-xl">
             <header class="flex items-center justify-between p-4 border-b border-gray-700 mb-6">
                <div class="flex items-center space-x-2">
                    <a href="#" onclick="showPage('dashboard-page', this)" class="text-primary-blue hover:text-secondary-cyan text-2xl transition duration-200">
                        <span class="material-icons">arrow_back</span>
                    </a>
                    <span class="text-xl font-bold text-secondary-cyan">AI <span class="text-light-text">Sales</span>.</span>
                </div>
                <h2 class="text-2xl font-bold text-light-text" data-en="Sales Resources" data-hi="‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®" data-ta="‡Æµ‡Æø‡Æ±‡Øç‡Æ™‡Æ©‡Øà ‡Æµ‡Æ≥‡Æô‡Øç‡Æï‡Æ≥‡Øç" data-ma="‡¥µ‡¥ø‡µΩ‡¥™‡µç‡¥™‡¥® ‡¥µ‡¥ø‡¥≠‡¥µ‡¥ô‡µç‡¥ô‡µæ">Sales Resources</h2>
            </header>
            <p class="text-subtle-text" data-en="Access best practice guides, integration documents, and coaching articles." data-hi="‡§∏‡§∞‡•ç‡§µ‡•ã‡§§‡•ç‡§§‡§Æ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ó‡§æ‡§á‡§°, ‡§è‡§ï‡•Ä‡§ï‡§∞‡§£ ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§î‡§∞ ‡§ï‡•ã‡§ö‡§ø‡§Ç‡§ó ‡§≤‡•á‡§ñ‡•ã‡§Ç ‡§§‡§ï ‡§™‡§π‡•Å‡§Å‡§ö‡•á‡§Ç‡•§" data-ta="‡Æö‡Æø‡Æ±‡Æ®‡Øç‡Æ§ ‡Æ®‡Æü‡Øà‡ÆÆ‡ØÅ‡Æ±‡Øà ‡Æµ‡Æ¥‡Æø‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æø‡Æï‡Æ≥‡Øç, ‡Æí‡Æ∞‡ØÅ‡Æô‡Øç‡Æï‡Æø‡Æ£‡Øà‡Æ™‡Øç‡Æ™‡ØÅ ‡ÆÜ‡Æµ‡Æ£‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø ‡Æï‡Æü‡Øç‡Æü‡ØÅ‡Æ∞‡Øà‡Æï‡Æ≥‡Øà ‡ÆÖ‡Æ£‡ØÅ‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç." data-ma="‡¥Æ‡¥ø‡¥ï‡¥ö‡µç‡¥ö ‡¥™‡¥∞‡¥ø‡¥∂‡µÄ‡¥≤‡¥® ‡¥ó‡µà‡¥°‡µÅ‡¥ï‡µæ, ‡¥∏‡¥Ç‡¥Ø‡µã‡¥ú‡¥® ‡¥∞‡µá‡¥ñ‡¥ï‡µæ, ‡¥ï‡µã‡¥ö‡µç‡¥ö‡¥ø‡¥Ç‡¥ó‡µç ‡¥≤‡µá‡¥ñ‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥é‡¥®‡µç‡¥®‡¥ø‡¥µ ‡¥Ü‡¥ï‡µç‡¥∏‡¥∏‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï.">Access best practice guides, integration documents, and coaching articles.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6" id="resourceGrid">
                <!-- Content will be dynamically generated here -->
            </div>
        </div>
    </div>

    <!-- Modals (Auth) -->
    <div id="onboardingModal" class="fixed inset-0 bg-black/70 flex justify-center items-center z-50 opacity-0 invisible transition duration-300">
        <div class="bg-card-bg p-8 rounded-xl w-11/12 max-w-md text-center shadow-2xl relative">
            <a href="#" class="absolute top-3 right-5 text-subtle-text text-3xl hover:text-light-text" onclick="closeModal('onboardingModal')">&times;</a>
            <span class="text-4xl block mb-4">üöÄ</span>
            <h2 class="text-2xl font-bold text-primary-blue mb-2" data-en="Setup Your Profile" data-hi="‡§Ö‡§™‡§®‡§æ ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤ ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç" data-ta="‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æö‡ØÅ‡ÆØ‡Æµ‡Æø‡Æµ‡Æ∞‡Æ§‡Øç‡Æ§‡Øà ‡ÆÖ‡ÆÆ‡Øà‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç" data-ma="‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥™‡µç‡¥∞‡µä‡¥´‡µà‡µΩ ‡¥∏‡¥ú‡µç‡¥ú‡¥Æ‡¥æ‡¥ï‡µç‡¥ï‡µÅ‡¥ï">Setup Your Profile</h2>
            <p class="text-subtle-text mb-6" data-en="Let's personalize your Sales Dashboard." data-hi="‡§Ü‡§á‡§è ‡§Ü‡§™‡§ï‡•á ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§ï‡•ã ‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï‡•É‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§" data-ta="‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Æø‡Æ±‡Øç‡Æ™‡Æ©‡Øà ‡Æü‡Ææ‡Æ∑‡Øç‡Æ™‡Øã‡Æ∞‡Øç‡Æü‡Øà ‡Æ§‡Æ©‡Æø‡Æ™‡Øç‡Æ™‡ÆØ‡Æ©‡Ææ‡Æï‡Øç‡Æï‡ØÅ‡Æµ‡Øã‡ÆÆ‡Øç." data-ma="‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥µ‡¥ø‡µΩ‡¥™‡µç‡¥™‡¥® ‡¥°‡¥æ‡¥∑‡µç‚Äå‡¥¨‡µã‡µº‡¥°‡µç ‡¥µ‡µç‡¥Ø‡¥ï‡µç‡¥§‡¥ø‡¥ó‡¥§‡¥Æ‡¥æ‡¥ï‡µç‡¥ï‡¥æ‡¥Ç.">Let's personalize your Sales Dashboard.</p>
            <form id="onboardingForm" class="space-y-4">
                <input type="text" id="salesName" placeholder="Your Name" required class="w-full p-3 rounded-lg bg-dark-bg border border-gray-700 text-light-text focus:ring-secondary-cyan focus:border-secondary-cyan transition duration-200">
                <input type="text" id="teamName" placeholder="Your Team/Region (e.g., APAC Enterprise)" required class="w-full p-3 rounded-lg bg-dark-bg border border-gray-700 text-light-text focus:ring-secondary-cyan focus:border-secondary-cyan transition duration-200">
                <input type="text" id="targetQuota" placeholder="Target Quota (e.g., $150,000)" required class="w-full p-3 rounded-lg bg-dark-bg border border-gray-700 text-light-text focus:ring-secondary-cyan focus:border-secondary-cyan transition duration-200">
                <label for="startDate" class="block text-left text-sm font-medium text-subtle-text" data-en="Quarter Start Date:" data-hi="‡§§‡§ø‡§Æ‡§æ‡§π‡•Ä ‡§™‡•ç‡§∞‡§æ‡§∞‡§Ç‡§≠ ‡§§‡§ø‡§•‡§ø:" data-ta="‡Æï‡Ææ‡Æ≤‡Ææ‡Æ£‡Øç‡Æü‡ØÅ ‡Æ§‡Øä‡Æü‡Æï‡Øç‡Æï ‡Æ§‡Øá‡Æ§‡Æø:" data-ma="‡¥™‡¥æ‡¥¶‡¥æ‡¥∞‡¥Ç‡¥≠ ‡¥§‡µÄ‡¥Ø‡¥§‡¥ø:">Quarter Start Date:</label>
                <input type="date" id="startDate" required class="w-full p-3 rounded-lg bg-dark-bg border border-gray-700 text-light-text focus:ring-secondary-cyan focus:border-secondary-cyan transition duration-200">
                <button type="submit" class="w-full py-3 bg-accent-orange text-dark-bg font-bold rounded-lg hover:bg-orange-600 transition duration-300 action-button" data-en="Go to Dashboard" data-hi="‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç" data-ta=" ‡Æü‡Ææ‡Æ∑‡Øç‡Æ™‡Øã‡Æ∞‡Øç‡Æü‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡Æö‡Øç ‡Æö‡ØÜ‡Æ≤‡Øç‡Æ≤‡Æµ‡ØÅ‡ÆÆ‡Øç" data-ma="‡¥°‡¥æ‡¥∑‡µç‚Äå‡¥¨‡µã‡µº‡¥°‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥™‡µã‡¥ï‡µÅ‡¥ï">Go to Dashboard</button>
            </form>
        </div>
    </div>
    
    <div id="loginModal" class="fixed inset-0 bg-black/70 flex justify-center items-center z-50 opacity-0 invisible transition duration-300">
        <div class="bg-card-bg p-8 rounded-xl w-11/12 max-w-md text-center shadow-2xl relative">
            <a href="#" class="absolute top-3 right-5 text-subtle-text text-3xl hover:text-light-text" onclick="closeModal('loginModal')">&times;</a>
            <span class="text-4xl block mb-4">üîë</span>
            <h2 class="text-2xl font-bold text-primary-blue mb-2" data-en="Welcome Back!" data-hi="‡§µ‡§æ‡§™‡§∏‡•Ä ‡§™‡§∞ ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à!" data-ta="‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡Æµ‡Æ∞‡ØÅ‡Æï!" data-ma="‡¥§‡¥ø‡¥∞‡¥ø‡¥ï‡µÜ ‡¥∏‡µç‡¥µ‡¥æ‡¥ó‡¥§‡¥Ç!">Welcome Back!</h2>
            <p class="text-subtle-text mb-6" data-en="Enter your credentials to access the sales intelligence dashboard." data-hi="‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§á‡§Ç‡§ü‡•á‡§≤‡§ø‡§ú‡•á‡§Ç‡§∏ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§§‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡•Ä ‡§ï‡•ç‡§∞‡•á‡§°‡•á‡§Ç‡§∂‡§ø‡§Ø‡§≤ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§" data-ta="‡Æµ‡Æø‡Æ±‡Øç‡Æ™‡Æ©‡Øà ‡Æ®‡ØÅ‡Æ£‡Øç‡Æ£‡Æ±‡Æø‡Æµ‡ØÅ ‡Æü‡Ææ‡Æ∑‡Øç‡Æ™‡Øã‡Æ∞‡Øç‡Æü‡Øà ‡ÆÖ‡Æ£‡ØÅ‡Æï ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æö‡Ææ‡Æ©‡Øç‡Æ±‡ØÅ‡Æï‡Æ≥‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç." data-ma="‡¥µ‡¥ø‡µΩ‡¥™‡µç‡¥™‡¥® ‡¥á‡µª‡µç‡¥±‡¥≤‡¥ø‡¥ú‡µª‡¥∏‡µç ‡¥°‡¥æ‡¥∑‡µç‚Äå‡¥¨‡µã‡µº‡¥°‡µç ‡¥Ü‡¥ï‡µç‚Äå‡¥∏‡¥∏‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡µª ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥ï‡µç‡¥∞‡µÜ‡¥°‡µª‡¥∑‡µç‡¥Ø‡¥≤‡µÅ‡¥ï‡µæ ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï.">Enter your credentials to access the sales intelligence dashboard.</p>
            <p id="loginError" class="text-red-500 text-sm mb-4" style="display: none;" data-en="Invalid username or password (try 'rep' / 'pass')." data-hi="‡§Ö‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§®‡§æ‡§Æ ‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° (‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ 'rep' / 'pass')‡•§" data-ta="‡Æ§‡Æµ‡Æ±‡Ææ‡Æ© ‡Æ™‡ÆØ‡Æ©‡Æ∞‡Øç‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æï‡Æü‡Æµ‡ØÅ‡Æö‡Øç‡Æö‡Øä‡Æ≤‡Øç ('rep' / 'pass' ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç)." data-ma="‡¥§‡µÜ‡¥±‡µç‡¥±‡¥æ‡¥Ø ‡¥â‡¥™‡¥Ø‡µã‡¥ï‡µç‡¥§‡µÉ‡¥®‡¥æ‡¥Æ‡¥Ç ‡¥Ö‡¥≤‡µç‡¥≤‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ ‡¥™‡¥æ‡¥∏‡µç‚Äå‡¥µ‡µá‡µº‡¥°‡µç ('rep' / 'pass' ‡¥∂‡µç‡¥∞‡¥Æ‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï).">Invalid username or password (try 'rep' / 'pass').</p>
            <form id="loginForm" class="space-y-4">
                <input type="text" id="loginUsername" placeholder="Username (try 'rep')" required class="w-full p-3 rounded-lg bg-dark-bg border border-gray-700 text-light-text focus:ring-secondary-cyan focus:border-secondary-cyan transition duration-200">
                <input type="password" id="loginPassword" placeholder="Password (try 'pass')" required class="w-full p-3 rounded-lg bg-dark-bg border border-gray-700 text-light-text focus:ring-secondary-cyan focus:border-secondary-cyan transition duration-200">
                <button type="submit" class="w-full py-3 bg-primary-blue text-light-text font-bold rounded-lg hover:bg-secondary-cyan transition duration-300 action-button" data-en="Log In" data-hi="‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç" data-ta="‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà‡Æï" data-ma="‡¥≤‡µã‡¥ó‡¥ø‡µª ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï">Log In</button>
            </form>
        </div>
    </div>
    
    <!-- Floating AI Assistant CTA -->
    <a href="#" id="floatingAiCta" class="fixed bottom-8 right-8 bg-primary-blue text-light-text p-4 rounded-full shadow-2xl flex items-center space-x-2 font-bold hover:bg-secondary-cyan transition duration-300 border-2 border-accent-orange z-40" onclick="showPage('ai-page')" style="display:none;">
        <span class="material-icons">smart_toy</span>
        <span class="hidden sm:inline" data-en="Chat with Atlas" data-hi="‡§è‡§ü‡§≤‡§∏ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ö‡•à‡§ü ‡§ï‡§∞‡•á‡§Ç" data-ta="‡ÆÖ‡Æü‡Øç‡Æ≤‡Æ∏‡ØÅ‡Æü‡Æ©‡Øç ‡ÆÖ‡Æ∞‡Æü‡Øç‡Æü‡Øà‡ÆØ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç" data-ma="‡¥Ö‡¥±‡µç‡¥±‡µç‡¥≤‡¥∏‡µÅ‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥ö‡¥æ‡¥±‡µç‡¥±‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï">Chat with Atlas</span>
    </a>

    <script>
// --- UI Element References ---
const onboardingModal = document.getElementById("onboardingModal");
const onboardingForm = document.getElementById("onboardingForm");
const loginModal = document.getElementById("loginModal");
const loginForm = document.getElementById("loginForm");
const loginBtn = document.getElementById("loginBtn");
const signupBtn = document.getElementById("signupBtn");
const heroSignupBtn = document.getElementById("heroSignupBtn");
const navDashboardLink = document.getElementById("navDashboardLink");

const logoutBtn = document.getElementById("logoutBtn");
const logoutBtnApp = document.getElementById("logoutBtnApp");

const languageSelectorDashboard = document.getElementById('languageSelectorDashboard');
const languageSelectorAi = document.getElementById('languageSelectorAi');
const allPages = document.querySelectorAll(".page");

const floatingAiCta = document.getElementById('floatingAiCta');

// --- API Keys ---
// Note: Using a placeholder key here.
const GEMINI_API_KEY = ''; 
const GEMINI_TEXT_MODEL = 'gemini-2.5-flash-preview-09-2025';

// --- Localization Data (Sales Context) ---
const LOCALE_DATA = {
    'hi': {
        'severe_tag': '‡§§‡§§‡•ç‡§ï‡§æ‡§≤', 'warning_tag': '‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç', 'info_tag': '‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä',
        'alert_1': '‡§°‡•Ä‡§≤: **Acme Corp** 7 ‡§¶‡§ø‡§®‡•ã‡§Ç ‡§∏‡•á ‡§è‡§ï ‡§π‡•Ä ‡§ö‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§π‡•à‡•§ ‡§Æ‡•à‡§®‡•ç‡§Ø‡•Å‡§Ö‡§≤ ‡§π‡§∏‡•ç‡§§‡§ï‡•ç‡§∑‡•á‡§™ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à‡•§',
        'alert_2': '‡§ï‡•ã‡§ö‡§ø‡§Ç‡§ó: ‡§™‡§ø‡§õ‡§≤‡•á 5 ‡§ï‡•â‡§≤‡•ã‡§Ç ‡§Æ‡•á‡§Ç **‡§¨‡§ú‡§ü** ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤‡•§ ‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü ‡§ï‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§',
        'alert_3': '‡§™‡§æ‡§á‡§™‡§≤‡§æ‡§á‡§® ‡§Æ‡•Ç‡§≤‡•ç‡§Ø **$10K** ‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§¨‡§¢‡§º ‡§ó‡§Ø‡§æ‡•§',
        'stages': { 'Qualification': '‡§Ø‡•ã‡§ó‡•ç‡§Ø‡§§‡§æ', 'Discovery': '‡§ñ‡•ã‡§ú', 'Proposal': '‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ', 'Negotiation': '‡§¨‡§æ‡§§‡§ö‡•Ä‡§§', 'Closed Won': '‡§¨‡§Ç‡§¶ ‡§ú‡•Ä‡§§' },
        'risk_level': { 'Optimal': '‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü', 'Moderate': '‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ', 'Severe': '‡§â‡§ö‡•ç‡§ö ‡§ú‡•ã‡§ñ‡§ø‡§Æ' },
        'coaching_insight': { 'High Confidence': '‡§â‡§ö‡•ç‡§ö ‡§ú‡•Ä‡§§ ‡§ï‡•Ä ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§®‡§æ‡•§ ‡§ó‡§§‡§ø ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡•á‡§Ç‡•§', 'Hold for Review': '‡§Ø‡§π ‡§°‡•Ä‡§≤ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§≠‡§∞‡•Ä ‡§π‡•à‡•§ ‡§Ö‡§™‡§®‡•á ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ï ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§', 'Low Engagement': '‡§∏‡§´‡§≤‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§ó‡§≤‡•á ‡§ö‡§∞‡§£ ‡§ï‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§' }
    },
    'ta': {
        'severe_tag': '‡Æâ‡Æü‡Æ©‡Æü‡Æø', 'warning_tag': '‡Æï‡Æµ‡Æ©‡ÆÆ‡Øç', 'info_tag': '‡Æ§‡Æï‡Æµ‡Æ≤‡Øç',
        'alert_1': '‡Æí‡Æ™‡Øç‡Æ™‡Æ®‡Øç‡Æ§‡ÆÆ‡Øç: **Acme Corp** 7 ‡Æ®‡Ææ‡Æü‡Øç‡Æï‡Æ≥‡Ææ‡Æï ‡Æí‡Æ∞‡Øá ‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Æø‡Æ≤‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ. ‡Æï‡Øà‡ÆØ‡Øá‡Æü‡ØÅ ‡Æ§‡Æ≤‡Øà‡ÆØ‡ØÄ‡Æü‡ØÅ ‡Æ§‡Øá‡Æµ‡Øà.',
        'alert_2': '‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø: ‡Æï‡Æü‡Æ®‡Øç‡Æ§ 5 ‡ÆÖ‡Æ¥‡Øà‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Æø‡Æ≤‡Øç **‡Æ™‡Æü‡Øç‡Æú‡ØÜ‡Æü‡Øç** ‡Æ™‡Æ±‡Øç‡Æ±‡Æø ‡Æï‡Øá‡Æü‡Øç‡Æï ‡Æ§‡Æµ‡Æ±‡Æø‡Æµ‡Æø‡Æü‡Øç‡Æü‡Æ§‡ØÅ. ‡Æ∏‡Øç‡Æï‡Æø‡Æ∞‡Æø‡Æ™‡Øç‡Æü‡Øà ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç.',
        'alert_3': '‡Æ™‡Øà‡Æ™‡Æ≤‡Øà‡Æ©‡Øç ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÅ **$10K**‡Æï‡Øç‡Æï‡ØÅ ‡ÆÆ‡Øá‡Æ≤‡Øç ‡ÆÖ‡Æ§‡Æø‡Æï‡Æ∞‡Æø‡Æ§‡Øç‡Æ§‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ.',
        'stages': { 'Qualification': '‡Æ§‡Æï‡ØÅ‡Æ§‡Æø', 'Discovery': '‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡Æ§‡Æ≤‡Øç', 'Proposal': '‡ÆØ‡Øã‡Æö‡Æ©‡Øà', 'Negotiation': '‡Æ™‡Øá‡Æö‡Øç‡Æö‡ØÅ‡Æµ‡Ææ‡Æ∞‡Øç‡Æ§‡Øç‡Æ§‡Øà', 'Closed Won': '‡ÆÆ‡ØÅ‡Æü‡Æø‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ ‡Æµ‡ØÜ‡Æ©‡Øç‡Æ±‡Æ§‡ØÅ' },
        'risk_level': { 'Optimal': '‡Æö‡Æø‡Æ±‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ', 'Moderate': '‡ÆÆ‡Æø‡Æ§‡ÆÆ‡Ææ‡Æ© ‡Æá‡Æü‡Æ∞‡Øç', 'Severe': '‡ÆÖ‡Æ§‡Æø‡Æï ‡Æá‡Æü‡Æ∞‡Øç' },
        'coaching_insight': { 'High Confidence': '‡ÆÖ‡Æ§‡Æø‡Æï ‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø ‡Æµ‡Ææ‡ÆØ‡Øç‡Æ™‡Øç‡Æ™‡ØÅ. ‡Æµ‡Øá‡Æï‡Æ§‡Øç‡Æ§‡Øà ‡Æ™‡Æ∞‡Ææ‡ÆÆ‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.', 'Hold for Review': '‡Æá‡Æ®‡Øç‡Æ§ ‡Æí‡Æ™‡Øç‡Æ™‡Æ®‡Øç‡Æ§‡ÆÆ‡Øç ‡ÆÖ‡Æ™‡Ææ‡ÆØ‡Æï‡Æ∞‡ÆÆ‡Ææ‡Æ©‡Æ§‡ØÅ. ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Øá‡Æ≤‡Ææ‡Æ≥‡Æ∞‡ØÅ‡Æü‡Æ©‡Øç ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç.', 'Low Engagement': '‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡Æï‡Øç‡Æï‡ØÅ ‡ÆÖ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§ ‡Æï‡Æü‡Øç‡Æü ‡Æ®‡Æü‡Æµ‡Æü‡Æø‡Æï‡Øç‡Æï‡Øà ‡Æ§‡Øá‡Æµ‡Øà.' }
    },
    'ma': {
        'severe_tag': '‡¥Ö‡¥ü‡¥ø‡¥Ø‡¥®‡µç‡¥§‡¥ø‡¥∞‡¥Ç', 'warning_tag': '‡¥∂‡µç‡¥∞‡¥¶‡µç‡¥ß‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï', 'info_tag': '‡¥µ‡¥ø‡¥µ‡¥∞‡¥Ç',
        'alert_1': '‡¥°‡µÄ‡µΩ: **Acme Corp** 7 ‡¥¶‡¥ø‡¥µ‡¥∏‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥í‡¥∞‡µá ‡¥ò‡¥ü‡µç‡¥ü‡¥§‡µç‡¥§‡¥ø‡¥≤‡¥æ‡¥£‡µç. ‡¥Æ‡¥æ‡¥®‡µÅ‡¥µ‡µΩ ‡¥á‡¥ü‡¥™‡µÜ‡¥ü‡µΩ ‡¥Ü‡¥µ‡¥∂‡µç‡¥Ø‡¥Æ‡¥æ‡¥£‡µç.',
        'alert_2': '‡¥ï‡µã‡¥ö‡µç‡¥ö‡¥ø‡¥Ç‡¥ó‡µç: ‡¥ï‡¥¥‡¥ø‡¥û‡µç‡¥û 5 ‡¥ï‡µã‡¥≥‡µÅ‡¥ï‡¥≥‡¥ø‡µΩ **‡¥¨‡¥°‡µç‡¥ú‡¥±‡µç‡¥±‡¥ø‡¥®‡µÜ**‡¥ï‡µç‡¥ï‡µÅ‡¥±‡¥ø‡¥ö‡µç‡¥ö‡µç ‡¥ö‡µã‡¥¶‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥™‡¥∞‡¥æ‡¥ú‡¥Ø‡¥™‡µç‡¥™‡µÜ‡¥ü‡µç‡¥ü‡µÅ. ‡¥∏‡µç‡¥ï‡µç‡¥∞‡¥ø‡¥™‡µç‡¥±‡µç‡¥±‡µç ‡¥Ö‡¥µ‡¥≤‡µã‡¥ï‡¥®‡¥Ç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï.',
        'alert_3': '‡¥™‡µà‡¥™‡µç‡¥™‡µç‡¥≤‡µà‡µª ‡¥Æ‡µÇ‡¥≤‡µç‡¥Ø‡¥Ç **$10K**-‡µΩ ‡¥ï‡µÇ‡¥ü‡µÅ‡¥§‡µΩ ‡¥µ‡µº‡¥¶‡µç‡¥ß‡¥ø‡¥ö‡µç‡¥ö‡µÅ.',
        'stages': { 'Qualification': '‡¥Ø‡µã‡¥ó‡µç‡¥Ø‡¥§', 'Discovery': '‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡µΩ', 'Proposal': '‡¥®‡¥ø‡µº‡¥¶‡µç‡¥¶‡µá‡¥∂‡¥Ç', 'Negotiation': '‡¥ö‡µº‡¥ö‡µç‡¥ö', 'Closed Won': '‡¥Ö‡¥ü‡¥ö‡µç‡¥ö‡µÅ ‡¥µ‡¥ø‡¥ú‡¥Ø‡¥ø‡¥ö‡µç‡¥ö‡µÅ' },
        'risk_level': { 'Optimal': '‡¥Æ‡¥ø‡¥ï‡¥ö‡µç‡¥ö‡¥§‡µç', 'Moderate': '‡¥Æ‡¥ø‡¥§‡¥Æ‡¥æ‡¥Ø ‡¥Ö‡¥™‡¥ï‡¥ü‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥§', 'Severe': '‡¥â‡¥Ø‡µº‡¥®‡µç‡¥® ‡¥Ö‡¥™‡¥ï‡¥ü‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥§' },
        'coaching_insight': { 'High Confidence': '‡¥â‡¥Ø‡µº‡¥®‡µç‡¥® ‡¥µ‡¥ø‡¥ú‡¥Ø ‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥§. ‡¥µ‡µá‡¥ó‡¥§ ‡¥®‡¥ø‡¥≤‡¥®‡¥ø‡µº‡¥§‡µç‡¥§‡µÅ‡¥ï.', 'Hold for Review': '‡¥à ‡¥°‡µÄ‡µΩ ‡¥Ö‡¥™‡¥ï‡¥ü‡¥ï‡¥∞‡¥Æ‡¥æ‡¥£‡µç. ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥Æ‡¥æ‡¥®‡µá‡¥ú‡¥∞‡µÅ‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥Ö‡¥µ‡¥≤‡µã‡¥ï‡¥®‡¥Ç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï.', 'Low Engagement': '‡¥µ‡¥ø‡¥ú‡¥Ø‡¥§‡µç‡¥§‡¥ø‡¥®‡¥æ‡¥Ø‡¥ø ‡¥Ö‡¥ü‡µÅ‡¥§‡µç‡¥§ ‡¥ò‡¥ü‡µç‡¥ü ‡¥®‡¥ü‡¥™‡¥ü‡¥ø ‡¥Ü‡¥µ‡¥∂‡µç‡¥Ø‡¥Æ‡¥æ‡¥£‡µç.' }
    },
    'en': {
        'severe_tag': 'URGENT', 'warning_tag': 'COACHING', 'info_tag': 'INFO',
        'alert_1': 'DEAL: **Acme Corp** stalled in stage for 7 days. Manual intervention required.',
        'alert_2': 'COACHING: Failed to ask about **Budget** in last 5 calls. Review script.',
        'alert_3': 'Pipeline value increased by over **$10K**. Congrats!',
        'stages': { 'Qualification': 'Qualification', 'Discovery': 'Discovery', 'Proposal': 'Proposal', 'Negotiation': 'Negotiation', 'Closed Won': 'Closed Won' },
        'risk_level': { 'Optimal': 'Optimal', 'Moderate': 'Moderate Risk', 'Severe': 'High Risk' },
        'coaching_insight': { 'High Confidence': 'High confidence in close. Maintain momentum.', 'Hold for Review': 'This deal is high risk. Review with your manager.', 'Low Engagement': 'Requires next step action for success.' }
    }
};

// --- Mock Data for Sales Dashboard ---
const SCENARIO_DATA = [
    // Scenario 1: Optimal (Baseline)
    {
        sales: {
            totalDeals: 18,
            avgDealSize: '$12,500',
            closing30Days: '$45,000',
            pipelineValue: '1,500,000',
            milestones: [{ day: 'Wed', name: 'Acme Demo' }, { day: 'Fri', name: 'Beta Launch' }, { day: 'Mon', name: 'Proposal Send' }],
            currentStageKey: 'Negotiation',
            avgStageDuration: '14 days',
            dealVelocityProgress: 70,
            revenueChart: [1450, 1500, 1480, 1520, 1550, 1500, 1530],
            coachingKey: 1, // High Confidence
        },
        dataIntegrity: {
            score: 88,
            riskKey: 'Optimal',
            advice: 'Data integrity is **optimal**. Keep leveraging Atlas to automate summaries.',
        },
        analysisResults: {
            PainPoint: "Manual data entry is consuming 1.5 hours daily for each rep.",
            BudgetSignal: "$50k allocated, but looking for cost optimization.",
            Timeline: "Requires implementation before end of Q4.",
            Sentiment: "Positive but skeptical about integration complexity."
        }
    },
    // Scenario 2: High Risk / Coaching Required
    {
        sales: {
            totalDeals: 25,
            avgDealSize: '$8,200',
            closing30Days: '$12,000',
            pipelineValue: '1,100,000',
            milestones: [{ day: 'Tue', name: 'Legal Review' }, { day: 'Fri', name: 'Renewal Discussion' }, { day: 'Mon', name: 'Follow-up Call' }],
            currentStageKey: 'Discovery',
            avgStageDuration: '25 days',
            dealVelocityProgress: 30,
            revenueChart: [1500, 1450, 1300, 1200, 1150, 1100, 1120],
            coachingKey: 2, // Hold for Review
        },
        dataIntegrity: {
            score: 61,
            riskKey: 'Severe',
            advice: 'Integrity score is **low (61%)**. Fields like **Next Steps** are frequently empty. Use Atlas immediately after calls.',
        },
        analysisResults: {
            PainPoint: "The prospect is skeptical about the ROI and needs proof points.",
            BudgetSignal: "Confirmed budget is available for solutions under $10k.",
            Timeline: "Pilot needed next month; budget expires in 6 weeks.",
            Sentiment: "Neutral/Cautious, frequently asking about competitors."
        }
    },
    // Scenario 3: Stagnant Pipeline / Low Engagement
    {
        sales: {
            totalDeals: 12,
            avgDealSize: '$30,000',
            closing30Days: '$0',
            pipelineValue: '1,800,000',
            milestones: [{ day: 'Thu', name: 'No Contact' }, { day: 'Mon', name: 'Internal Delay' }, { day: 'Tue', name: 'Gatekeeper Follow-up' }],
            currentStageKey: 'Proposal',
            avgStageDuration: '40 days',
            dealVelocityProgress: 85,
            revenueChart: [1700, 1750, 1800, 1800, 1800, 1800, 1780],
            coachingKey: 3, // Low Engagement
        },
        dataIntegrity: {
            score: 75,
            riskKey: 'Moderate',
            advice: 'Data is generally accurate, but **Stakeholder Titles** are often generic. Get named contacts.',
        },
        analysisResults: {
            PainPoint: "Procurement requires three competitive bids before moving forward.",
            BudgetSignal: "Budget confirmed at $30k, ready to spend.",
            Timeline: "Indefinite delay, waiting for internal approval cycle (3-6 months).",
            Sentiment: "Frustrated with internal bureaucracy."
        }
    }
];

// Determine which scenario to load based on a simple cycle (0, 1, 2)
const CURRENT_SCENARIO_INDEX = (new Date().getDay() % SCENARIO_DATA.length);
const DEMO_DATA = SCENARIO_DATA[CURRENT_SCENARIO_INDEX];
// ----------------------------------------------------------------------


// ----------------------------------------------------------------------
// --- CORE LOGIC: TTS UTILITIES (Copied from previous code) ---
// ----------------------------------------------------------------------

// Helper to convert base64 audio data to ArrayBuffer
function base64ToArrayBuffer(base64) {
    const binaryString = atob(base64);
    const len = binaryString.length;
    const bytes = new Uint8Array(len);
    for (let i = 0; i < len; i++) {
        bytes[i] = binaryString.charCodeAt(i);
    }
    return bytes.buffer;
}

// Helper to convert PCM audio data (from API) into a playable WAV Blob
function pcmToWav(pcmData, sampleRate) {
    const buffer = new ArrayBuffer(44 + pcmData.length * 2);
    const view = new DataView(buffer);

    function writeString(view, offset, string) {
        for (let i = 0; i < string.length; i++) {
            view.setUint8(offset + i, string.charCodeAt(i));
        }
    }

    writeString(view, 0, 'RIFF');
    view.setUint32(4, 36 + pcmData.length * 2, true);
    writeString(view, 8, 'WAVE');
    writeString(view, 12, 'fmt ');
    view.setUint32(16, 16, true);
    view.setUint16(20, 1, true);
    view.setUint16(22, 1, true);
    view.setUint32(24, sampleRate, true);
    view.setUint32(28, sampleRate * 1 * 2, true);
    view.setUint16(32, 1 * 2, true);
    view.setUint16(34, 16, true);
    writeString(view, 36, 'data');
    view.setUint32(40, pcmData.length * 2, true);

    let offset = 44;
    for (let i = 0; i < pcmData.length; i++) {
        view.setInt16(offset, pcmData[i], true);
        offset += 2;
    }

    return new Blob([view], { type: 'audio/wav' });
}

const VOICE_MAP = {
    'en': { voiceName: 'Kore', langCode: 'en-US' },
    'hi': { voiceName: 'Kore', langCode: 'hi-IN' }, 
    'ta': { voiceName: 'Despina', langCode: 'ta-IN' },
    'ma': { voiceName: 'Charon', langCode: 'en-US' } 
};

async function getTtsAudio(text, lang) {
    if (!GEMINI_API_KEY) return null; // Skip if no API key is set

    const config = VOICE_MAP[lang] || VOICE_MAP['en'];
    const systemPrompt = `Speak the following text in a professional, firm tone as the Sales AI Assistant Atlas. Respond concisely in the provided language.`;
    
    const cleanText = text.replace(/<\/?strong>|<\/?u>/g, '');

    const payload = {
        contents: [{ parts: [{ text: cleanText }] }],
        generationConfig: {
            responseModalities: ["AUDIO"],
            speechConfig: {
                voiceConfig: { prebuiltVoiceConfig: { voiceName: config.voiceName } }
            }
        },
        systemInstruction: { parts: [{ text: systemPrompt }] }
    };
    
    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${GEMINI_API_KEY}`;
    
    try {
        const response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
        });

        if (!response.ok) throw new Error(`TTS API error: ${response.status} - ${response.statusText}`);

        const result = await response.json();
        const part = result?.candidates?.[0]?.content?.parts?.[0];
        const audioData = part?.inlineData?.data;
        const mimeType = part?.inlineData?.mimeType;

        if (audioData && mimeType && mimeType.startsWith("audio/L16")) {
            const match = mimeType.match(/rate=(\d+)/);
            const sampleRate = match ? parseInt(match[1], 10) : 16000;
            const pcmDataBuffer = base64ToArrayBuffer(audioData);
            const pcm16 = new Int16Array(pcmDataBuffer);
            const wavBlob = pcmToWav(pcm16, sampleRate);
            return URL.createObjectURL(wavBlob);
        } else {
            console.warn("TTS response missing valid audio data.");
            return null;
        }

    } catch (error) {
        console.error("TTS error:", error);
        return null;
    }
}

// ----------------------------------------------------------------------
// --- CORE LOGIC: LOCALIZATION ---
// ----------------------------------------------------------------------

function updateContentLanguage(lang) {
    const locale = LOCALE_DATA[lang] || LOCALE_DATA['en'];
    const profile = JSON.parse(localStorage.getItem("salesProfile")) || { team: 'Team' };
    const teamName = profile.team;

    // 1. Update text content for elements with data attributes
    document.querySelectorAll('[data-en]').forEach(element => {
        const newText = element.getAttribute(`data-${lang}`) || element.getAttribute('data-en');
        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            element.placeholder = newText;
        } else if (newText) {
            const span = element.querySelector('span');
            if (span && element.tagName !== 'A' && element.tagName !== 'BUTTON') {
                // Preserve inner span for icons/values
                element.childNodes[0].nodeValue = newText.trim().replace(/\s*$/, ' ');
            } else {
                element.textContent = newText;
            }
        }
    });

    // 2. Update descriptive labels (e.g., "Total Deals: X")
    document.querySelectorAll('[data-en-label]').forEach(element => {
        const labelAttr = `data-${lang}-label`;
        const labelText = element.getAttribute(labelAttr);
        if (labelText) {
            const span = element.querySelector('span');
            element.childNodes[0].nodeValue = `${labelText}: `;
            if (span) element.appendChild(span); 
        }
    });

    // 3. Update Alerts & Advisories
    const alertsList = document.getElementById('alertsList');
    if (alertsList) {
        alertsList.innerHTML = `
            <li><span class="px-2 py-1 rounded-md text-xs font-semibold alert-tag severe">${locale.severe_tag}</span> ${locale.alert_1}</li>
            <li><span class="px-2 py-1 rounded-md text-xs font-semibold alert-tag moderate">${locale.warning_tag}</span> ${locale.alert_2}</li>
            <li><span class="px-2 py-1 rounded-md text-xs font-semibold alert-tag info">${locale.info_tag}</span> ${locale.alert_3} for the ${teamName} team.</li>
        `;
    }
    
    // 4. Update Deal Stage
    const stageElement = document.getElementById('currentStageValue');
    if (stageElement) {
        const stageKey = DEMO_DATA.sales.currentStageKey;
        const stageLabel = stageElement.closest('p').getAttribute(`data-${lang}-label`);
        const translatedStage = locale.stages[stageKey] || stageKey;
        stageElement.textContent = translatedStage;
        stageElement.closest('p').childNodes[0].nodeValue = `${stageLabel}: `;
        stageElement.closest('p').appendChild(stageElement);
    }
    
    // 5. Update Risk Level
    const riskLevelElement = document.getElementById('accuracyRisk');
    if(riskLevelElement) {
        const currentRiskKey = riskLevelElement.getAttribute('data-risk-key') || 'Optimal';
        const riskLabel = riskLevelElement.closest('p').getAttribute(`data-${lang}-label`);
        const translatedRisk = locale.risk_level[currentRiskKey] || currentRiskKey;
        riskLevelElement.textContent = translatedRisk;
        riskLevelElement.closest('p').childNodes[0].nodeValue = `${riskLabel}: `;
        riskLevelElement.closest('p').appendChild(riskLevelElement);
    }

    // 6. Update Coaching Insight
    const coachingElement = document.getElementById('coachingInsight');
    if(coachingElement) {
        const coachingKey = coachingElement.getAttribute('data-coaching-key');
        let insightText = '';
        if (coachingKey == 1) insightText = locale.coaching_insight['High Confidence'];
        else if (coachingKey == 2) insightText = locale.coaching_insight['Hold for Review'];
        else insightText = locale.coaching_insight['Low Engagement'];
        coachingElement.textContent = insightText;
    }

    // 7. Sync language selectors
    if (languageSelectorDashboard) languageSelectorDashboard.value = lang;
    if (languageSelectorAi) languageSelectorAi.value = lang;

    localStorage.setItem('currentLanguage', lang);
}

// ----------------------------------------------------------------------
// --- CORE LOGIC: NAVIGATION & AUTHENTICATION ---
// ----------------------------------------------------------------------

function showPage(pageId, navElement = null) {
    // Pause TTS on navigation
    if (window.currentPlayingAudio) {
        window.currentPlayingAudio.pause();
        window.currentPlayingAudio = null;
    }
    
    allPages.forEach(page => page.classList.remove('active'));
    
    const targetPage = document.getElementById(pageId);
    if (targetPage) {
        targetPage.classList.add('active');
        const currentLang = localStorage.getItem('currentLanguage') || 'en';

        // Update active navigation link styling
        document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
        if (navElement) {
            navElement.classList.add('active');
        } else if (pageId === 'dashboard-page') {
            document.getElementById('navDashboardLink').classList.add('active');
        }
        
        // Initialize specific page contents
        if (pageId === 'dashboard-page') {
            initializeDashboard();
        } else if (pageId === 'ai-page') {
            initializeAiAssistant();
        } else if (pageId === 'transcript-analysis-page') {
            initializeTranscriptAnalysis();
        } else if (pageId === 'transcript-library-page') {
            initializeLibraryPage();
        } else if (pageId === 'resources-page') {
            initializeResourcesPage();
        }
        
        // Always apply language after loading content
        updateContentLanguage(currentLang);
    }
}

function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.remove('opacity-100', 'visible');
        modal.classList.add('opacity-0', 'invisible');
        if (modalId === 'loginModal') {
            const loginError = document.getElementById('loginError');
            if (loginError) loginError.style.display = 'none';
        }
    }
}

function openModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.remove('opacity-0', 'invisible');
        modal.classList.add('opacity-100', 'visible');
    }
}

function handleSignUp(e) {
    e.preventDefault();
    const salesProfile = {
        name: document.getElementById("salesName").value,
        team: document.getElementById("teamName").value,
        quota: document.getElementById("targetQuota").value,
        startDate: document.getElementById("startDate").value
    };
    localStorage.setItem("salesProfile", JSON.stringify(salesProfile));
    localStorage.setItem('isLoggedIn', 'true');
    closeModal('onboardingModal');
    checkUserSession();
}

function handleLogin(e) {
    e.preventDefault();
    const username = document.getElementById('loginUsername').value;
    const password = document.getElementById('loginPassword').value;
    const mockUsers = { 'rep': 'pass', 'atlas': 'ai' };
    const loginError = document.getElementById('loginError');
    
    if (mockUsers[username] && mockUsers[username] === password) {
        localStorage.setItem('isLoggedIn', 'true');
        closeModal('loginModal');
        if (loginError) loginError.style.display = 'none';
        
        // Set default profile if logging in without one
        if (!localStorage.getItem("salesProfile")) {
            localStorage.setItem("salesProfile", JSON.stringify({
                name: username, team: "North America", quota: "$200,000", startDate: "2024-10-01"
            }));
        }
        checkUserSession();
    } else {
        if (loginError) loginError.style.display = 'block';
    }
}

function handleLogout(e) {
    e.preventDefault();
    localStorage.removeItem('isLoggedIn');
    localStorage.removeItem('salesProfile');
    checkUserSession();
    showPage('homepage');
}

function checkUserSession() {
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    const hasProfile = localStorage.getItem('salesProfile');

    // Update UI element visibility
    // Accept boolean or explicit display strings (e.g., 'flex')
    const display = (el, show) => {
        if (!el) return;
        if (typeof show === 'string') {
            el.style.display = show;
        } else {
            el.style.display = show ? 'block' : 'none';
        }
    };

    display(loginBtn, !isLoggedIn);
    display(signupBtn, !isLoggedIn);
    display(heroSignupBtn, !isLoggedIn);
    display(logoutBtn, isLoggedIn);
    display(logoutBtnApp, isLoggedIn);
    display(navDashboardLink, isLoggedIn);
    display(floatingAiCta, isLoggedIn && hasProfile ? 'flex' : 'none');

    if (isLoggedIn && hasProfile && document.getElementById('homepage').classList.contains('active')) {
          showPage('dashboard-page');
    } else if (isLoggedIn && !hasProfile) {
          openModal('onboardingModal');
          showPage('homepage');
    }
    
    updateContentLanguage(localStorage.getItem('currentLanguage') || 'en');
}

// ----------------------------------------------------------------------
// --- CORE LOGIC: DASHBOARD INITIALIZATION ---
// ----------------------------------------------------------------------

function initializeDashboard() {
    const profile = JSON.parse(localStorage.getItem("salesProfile")) || {
        name: "Demo Rep", team: "Unassigned", quota: "$0", startDate: "2024-01-01"
    };
    const currentLang = localStorage.getItem('currentLanguage') || 'en';
    const locale = LOCALE_DATA[currentLang];

    // 1. Update Profile Details
    document.getElementById('repDetails').textContent = `${profile.name} (${profile.team})`;

    // 2. Pipeline Health
    document.getElementById('pipelineDeals').textContent = DEMO_DATA.sales.totalDeals;
    document.getElementById('avgDealSize').textContent = DEMO_DATA.sales.avgDealSize;
    document.getElementById('closing30Days').textContent = DEMO_DATA.sales.closing30Days;
    
    const milestoneList = document.getElementById('milestoneList');
    if (milestoneList) {
        milestoneList.innerHTML = DEMO_DATA.sales.milestones.map(m =>
            `<li class="flex justify-between items-center text-sm"><span class="font-bold text-secondary-cyan/80">${m.day}</span> ${m.name}</li>`
        ).join('');
    }

    // 3. Deal Velocity
    // avgStageDuration is the span itself in markup; set its textContent directly
    const avgStageEl = document.getElementById('avgStageDuration');
    if (avgStageEl) avgStageEl.textContent = DEMO_DATA.sales.avgStageDuration;
    document.getElementById('currentStageValue').textContent = DEMO_DATA.sales.currentStageKey; // Localized after
    document.getElementById('dealVelocityBar').style.width = `${DEMO_DATA.sales.dealVelocityProgress}%`;

    // 4. CRM Data Integrity
    const integrity = DEMO_DATA.dataIntegrity.score;
    const riskKey = DEMO_DATA.dataIntegrity.riskKey;
    document.getElementById('integrityScore').textContent = `${integrity}%`;
    document.getElementById('accuracyRisk').setAttribute('data-risk-key', riskKey);
    document.getElementById('accuracyRisk').textContent = riskKey; // Localized after
    document.getElementById('dataIntegrityBar').style.width = `${integrity}%`;
    
    const dataAdviceElement = document.getElementById('dataAdvice');
    dataAdviceElement.innerHTML = DEMO_DATA.dataIntegrity.advice.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
    
    // Color code the bar and advice based on risk level
    let barColor = '#22c55e'; // Green-500 (Optimal)
    if (riskKey === 'Moderate') barColor = '#facc15'; // Yellow-500
    else if (riskKey === 'Severe') barColor = '#ef4444'; // Red-500

    document.getElementById('dataIntegrityBar').style.backgroundColor = barColor;
    dataAdviceElement.style.borderLeftColor = barColor;

    // 5. Revenue Projection
    document.getElementById('currentPipelineValue').textContent = `$${DEMO_DATA.sales.pipelineValue}`;
    
    const coachingElement = document.getElementById('coachingInsight');
    coachingElement.setAttribute('data-coaching-key', DEMO_DATA.sales.coachingKey);
    coachingElement.textContent = locale.coaching_insight[DEMO_DATA.sales.coachingKey === 1 ? 'High Confidence' : (DEMO_DATA.sales.coachingKey === 2 ? 'Hold for Review' : 'Low Engagement')];
    coachingElement.style.backgroundColor = DEMO_DATA.sales.coachingKey === 1 ? '#16a34a' : (DEMO_DATA.sales.coachingKey === 2 ? '#be123c' : '#f97316');
    coachingElement.style.color = DEMO_DATA.sales.coachingKey === 1 ? '#e0f2f1' : 'white';
    coachingElement.style.borderLeftColor = DEMO_DATA.sales.coachingKey === 1 ? '#4ade80' : (DEMO_DATA.sales.coachingKey === 2 ? '#f87171' : '#fcd34d');

    // 6. Initialize Charts
    const initChart = (id, data, options = {}) => {
        const chartElement = document.getElementById(id);
        if (chartElement && chartElement.chart) chartElement.chart.destroy();
        const ctx = chartElement.getContext('2d');
        chartElement.chart = new Chart(ctx, {
            type: data.type,
            data: data.data,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: { ticks: { color: '#94a3b8' }, grid: { color: '#334155' } },
                    y: { ticks: { color: '#94a3b8' }, beginAtZero: options.beginAtZero !== false, grid: { color: '#334155' } }
                },
                ...options
            }
        });
    };

    // Revenue Chart (Line) - ensure labels are defined to avoid Chart.js errors
    const revenueLabels = Array.from({ length: (DEMO_DATA.sales.revenueChart || []).length }, (_, i) => `Day ${i + 1}`);
    initChart('revenueChart', {
        type: 'line',
        data: {
            labels: revenueLabels,
            datasets: [{
                label: 'Pipeline Value (K)',
                data: DEMO_DATA.sales.revenueChart || [],
                borderColor: '#06b6d4',
                backgroundColor: 'rgba(6, 182, 212, 0.1)',
                tension: 0.4,
                pointRadius: 5,
                pointHoverRadius: 8
            }]
        }
    }, { beginAtZero: false });

    // Reapply language to update all newly set labels
    updateContentLanguage(currentLang);
}

// ----------------------------------------------------------------------
// --- INITIALIZE LIBRARY/RESOURCE PAGES (Mock Content Generation) ---
// ----------------------------------------------------------------------

function initializeLibraryPage() {
    const libraryGrid = document.getElementById('transcriptGrid');
    if (!libraryGrid) return;
    libraryGrid.innerHTML = ''; 

    // Use hardcoded list since DEMO_DATA is now scenarios
    const libraryItems = [
        { title: "Q3 Top Performer Call", meta: "Closed Won | $25k | 88% Data Score" },
        { title: "Stalled Deal Review - July", meta: "Negotiation | $40k | Low Engagement" },
        { title: "New Prospect Call Script", meta: "Template | Qualification" },
        { title: "Renewal Discussion - Client X", meta: "Discovery | $15k | High Sentiment" }
    ];

    libraryItems.forEach(item => {
        const cardHtml = `
            <div class="p-4 rounded-xl bg-gray-800 shadow-md border border-gray-700 cursor-pointer hover:border-secondary-cyan transition duration-200">
                <div class="flex items-center">
                    <span class="material-icons text-secondary-cyan mr-3">mic_external_on</span>
                    <h3 class="text-light-text font-semibold">${item.title}</h3>
                </div>
                <p class="text-subtle-text text-sm mt-2">${item.meta}</p>
                <button class="mt-3 text-xs text-primary-blue hover:text-accent-orange font-medium" onclick="showPage('transcript-analysis-page')">View Full Analysis & Coaching</button>
            </div>
        `;
        libraryGrid.insertAdjacentHTML('beforeend', cardHtml);
    });
}

function initializeResourcesPage() {
    const resourceGrid = document.getElementById('resourceGrid');
    if (!resourceGrid) return;
    resourceGrid.innerHTML = ''; 
    
    // Use hardcoded list since DEMO_DATA is now scenarios
    const resourceItems = [
        { title: "Integration Documentation", emoji: "üîó", description: "Guides for connecting to major CRM platforms (Salesforce, HubSpot)." },
        { title: "Sales Strategy Playbook", emoji: "üìö", description: "Best practices for handling common objections." },
        { title: "Call Summary Template", emoji: "üìù", description: "Recommended structure for call data extraction." },
        { title: "QBR Presentation Template", emoji: "üìä", description: "Ready-to-use template for Quarterly Business Review." },
        { title: "Run Live Transcript Analysis", emoji: "üîé", description: "Paste a transcript for instant data extraction.", pageId: "transcript-analysis-page" }
    ];


    resourceItems.forEach(resource => {
        const clickAction = resource.pageId ? `onclick="showPage('${resource.pageId}')"` : '';
        const cardHtml = `
            <div class="p-4 rounded-xl bg-gray-800 shadow-md border border-gray-700 hover:border-secondary-cyan transition duration-200 flex flex-col justify-between">
                <div class="flex items-start">
                    <span class="text-xl mr-3">${resource.emoji}</span>
                    <div>
                        <h3 class="text-light-text font-semibold">${resource.title}</h3>
                        <p class="text-subtle-text text-sm mt-1">${resource.description}</p>
                    </div>
                </div>
                <a href="#" ${clickAction} class="mt-4 text-xs text-primary-blue hover:text-accent-orange font-medium self-end">Access Resource</a>
            </div>
        `;
        resourceGrid.insertAdjacentHTML('beforeend', cardHtml);
    });
}

function initializeTranscriptAnalysis() {
    // Reset/clear analysis fields when navigating to the page
    document.getElementById('transcriptInput').value = '';
    document.getElementById('analysisResult').style.display = 'none';
    document.getElementById('analysisLoading').style.display = 'none';
}

// Function triggered by the "Run Analysis" button
function runAnalysis() {
    const transcript = document.getElementById('transcriptInput').value.trim();
    const loading = document.getElementById('analysisLoading');
    const resultCard = document.getElementById('analysisResult');
    const extractedFieldsList = document.getElementById('extractedFields');
    const jsonOutput = document.getElementById('jsonOutput');

    if (transcript.length < 50) {
        alert("Please paste a longer transcript for meaningful analysis (min 50 characters).");
        return;
    }

    // Show loading
    loading.style.display = 'block';
    resultCard.style.display = 'none';
    jsonOutput.textContent = '...Analyzing and generating structured data...';

    // Simulate AI processing (3 second delay)
    setTimeout(() => {
        
        // Mock data extraction
        const analysis = DEMO_DATA.analysisResults;
        
        // Mock JSON output (Pydantic Schema Enforcement Simulation)
        const mockJson = JSON.stringify({
            dealID: "TLM-4521",
            account: "Prosperity Holdings",
            painPointSummary: analysis.PainPoint,
            budgetConfidence: analysis.BudgetSignal,
            timeline: analysis.Timeline,
            sentiment: analysis.Sentiment,
            nextStep: "Technical Deep Dive Scheduled",
            followUpRequired: true
        }, null, 2);
        
        jsonOutput.textContent = mockJson;
        
        document.getElementById('resultTitle').textContent = `Transcript Summary:`;
        document.getElementById('resultSummary').textContent = "Key conversational data successfully extracted and structured:";
        
        extractedFieldsList.innerHTML = `
            <li>**Pain Point:** ${analysis.PainPoint}</li>
            <li>**Budget Signal:** ${analysis.BudgetSignal}</li>
            <li>**Timeline:** ${analysis.Timeline}</li>
            <li>**Sentiment:** ${analysis.Sentiment}</li>
            <li>**Follow-up:** **Critical**. Technical deep dive needed next week.</li>
        `;
        
        // Apply strong tag formatting
        document.getElementById('resultSummary').innerHTML = document.getElementById('resultSummary').textContent.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        extractedFieldsList.innerHTML = extractedFieldsList.innerHTML.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');

        loading.style.display = 'none';
        resultCard.style.display = 'block';
        updateContentLanguage(localStorage.getItem('currentLanguage') || 'en');
        
    }, 3000); 
}

// ----------------------------------------------------------------------
// --- CORE LOGIC: AI ASSISTANT (ATLAS) ---
// ----------------------------------------------------------------------

function initializeAiAssistant() {
    const chatBox = document.getElementById("chatBox");
    const textInput = document.getElementById("textInput");
    const sendBtn = document.getElementById("sendBtn");
    const voiceBtn = document.getElementById("voiceBtn");
    const aiStatus = document.getElementById("aiStatus");
    const currentLang = localStorage.getItem('currentLanguage') || 'en';
    
    // Clear chat on re-initialization (only if empty to prevent re-adding welcome)
    if (!chatBox.getAttribute('data-initialized') || localStorage.getItem('currentLanguage') !== chatBox.getAttribute('data-lang')) {
        chatBox.innerHTML = '';
        chatBox.setAttribute('data-initialized', 'true');
        chatBox.setAttribute('data-lang', currentLang);
    }
    
    const profile = JSON.parse(localStorage.getItem("salesProfile")) || {
        name: "Demo Rep", team: "Unassigned"
    };
    const { name: repName, team: repTeam } = profile;
    const langName = { en: 'English', hi: 'Hindi', ta: 'Tamil', ma: 'Malayalam' }[currentLang];

    function addMessage(text, sender) {
        const messageDiv = document.createElement('div');
        messageDiv.classList.add(sender === 'ai' ? 'ai-message' : 'user-message');
        const bubble = document.createElement('div');
        bubble.classList.add('message-bubble', 'p-4', 'rounded-xl', 'max-w-xs', 'md:max-w-lg');
        
        // Simple HTML sanitization and markdown bold conversion
        let cleanText = text.replace(/<script\b[^>]*>([\s\S]*?)<\/script>/gim, "")
                         .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        
        const p = document.createElement('p');
        p.innerHTML = cleanText;

        if (sender === 'ai') {
            const avatar = document.createElement('span');
            avatar.classList.add('text-3xl', 'mr-2', 'flex-shrink-0');
            avatar.textContent = 'ü§ñ';
            messageDiv.appendChild(avatar);

            // TTS Button Setup
            const playBtn = document.createElement('button');
            playBtn.classList.add('tts-play-btn', 'ml-3', 'text-lg', 'transition', 'duration-100');
            playBtn.innerHTML = '<span class="material-icons">volume_up</span>';
            playBtn.style.color = '#94a3b8'; // subtle text color

            playBtn.addEventListener('click', async () => {
                const originalIcon = playBtn.innerHTML;
                const originalColor = playBtn.style.color;
                
                playBtn.innerHTML = '<span class="material-icons spin-animation">sync</span>';
                playBtn.style.color = '#f97316'; 
                playBtn.disabled = true;

                if (window.currentPlayingAudio) {
                    window.currentPlayingAudio.pause();
                    window.currentPlayingAudio = null;
                }
                
                const audioUrl = await getTtsAudio(p.textContent, localStorage.getItem('currentLanguage') || 'en');
                
                playBtn.innerHTML = originalIcon;
                playBtn.style.color = originalColor;
                playBtn.disabled = false;

                if (audioUrl) {
                    const audio = new Audio(audioUrl);
                    window.currentPlayingAudio = audio;
                    
                    audio.onplaying = () => { playBtn.style.color = '#ef4444'; }; // Red while playing
                    audio.onended = () => { 
                        playBtn.style.color = originalColor; 
                        window.currentPlayingAudio = null;
                        URL.revokeObjectURL(audioUrl);
                    };
                    
                    audio.play().catch(e => {
                        console.error("Audio playback failed:", e);
                        playBtn.style.color = originalColor;
                        window.currentPlayingAudio = null;
                        URL.revokeObjectURL(audioUrl);
                    });
                }
            });

            bubble.appendChild(p);
            bubble.appendChild(playBtn);
            bubble.classList.remove('bg-light-text');
            bubble.classList.add('bg-gray-700', 'text-light-text');
            
        } else {
            bubble.appendChild(p);
            bubble.classList.add('bg-secondary-cyan', 'text-dark-bg');
            bubble.classList.remove('bg-card-bg');
        }
        
        messageDiv.appendChild(bubble);
        chatBox.appendChild(messageDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    function showTypingIndicator() {
        const typingDiv = document.createElement('div');
        typingDiv.classList.add('ai-message');
        typingDiv.id = 'typing-indicator';
        typingDiv.innerHTML = `<span class="text-3xl mr-2 flex-shrink-0">ü§ñ</span><div class="message-bubble bg-gray-700 p-3 rounded-full"><div class="typing-indicator flex space-x-1 items-center w-8"><span class="block w-2 h-2 rounded-full bg-subtle-text typing-dot"></span><span class="block w-2 h-2 rounded-full bg-subtle-text typing-dot"></span><span class="block w-2 h-2 rounded-full bg-subtle-text typing-dot"></span></div></div>`;
        chatBox.appendChild(typingDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
        if (aiStatus) {
            aiStatus.textContent = "Typing...";
            aiStatus.classList.remove('online');
            aiStatus.classList.add('typing');
        }
    }
    function removeTypingIndicator() {
        const typingIndicator = document.getElementById('typing-indicator');
        if (typingIndicator) typingIndicator.remove();
        if (aiStatus) {
            aiStatus.textContent = "Online";
            aiStatus.classList.remove('typing');
            aiStatus.classList.add('online');
        }
    }

    async function getAiResponse(query) {
        if (!GEMINI_API_KEY) {
            return "Atlas: The AI is offline. Please set the **GEMINI_API_KEY** in the script to enable chat.";
        }
        
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${GEMINI_TEXT_MODEL}:generateContent?key=${GEMINI_API_KEY}`;
        
        const systemPrompt = `You are Atlas, a **Precision Sales Intelligence AI Assistant** for the Automated Sales Intelligence platform. You are highly specialized in sales coaching, CRM data structure, pipeline analysis, and converting transcripts into actionable insights. The user is ${repName}, a sales representative on the ${repTeam} team. Answer concisely, using expert-level sales terminology, and ONLY in the ${langName} language.`;
        
        const payload = {
            contents: [{ parts: [{ text: query }] }],
            tools: [{ "google_search": {} }], 
            systemInstruction: { parts: [{ text: systemPrompt }] },
        };

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            
            if (!response.ok) throw new Error(`API error: ${response.statusText}`);
            const data = await response.json();
            
            let responseText = data.candidates?.[0]?.content?.parts?.[0]?.text;
            
            if (responseText) return responseText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            return "Atlas: I am unable to generate a coherent sales response right now. Please try rephrasing your coaching request.";
        } catch (error) {
            console.error("Error fetching AI response:", error);
            return "Atlas: Connection error. Please check your network or API configuration.";
        }
    }

    async function processQuery(query) {
        if (!query.trim()) return;
        addMessage(query, 'user');
        textInput.value = '';
        showTypingIndicator();
        const aiResponse = await getAiResponse(query);
        removeTypingIndicator();
        addMessage(aiResponse, 'ai');
    }

    // --- SpeechRecognition Logic (Adapted for Atlas) ---
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (SpeechRecognition && voiceBtn) {
        const recognition = new SpeechRecognition();
        const recognizerLang = currentLang === 'hi' ? 'hi-IN' : (currentLang === 'ta' ? 'ta-IN' : (currentLang === 'ma' ? 'ml-IN' : 'en-IN'));
        recognition.lang = recognizerLang;
        recognition.continuous = false;
        recognition.interimResults = false;

        voiceBtn.addEventListener('click', () => {
            try {
                recognition.start();
                if (aiStatus) {
                    aiStatus.textContent = "Listening...";
                    aiStatus.classList.add('typing');
                }
                voiceBtn.style.color = '#ef4444'; // Red while listening
            } catch (e) {
                console.error("Speech recognition already running or not allowed.", e);
            }
        });
        
        recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            if (textInput) textInput.value = transcript;
            processQuery(transcript);
        };
        
        recognition.onend = () => {
            voiceBtn.style.color = '#1e40af'; // Reset to primary blue
            if (aiStatus && !document.getElementById('typing-indicator')) {
                aiStatus.textContent = "Online";
                aiStatus.classList.remove('typing');
            }
        };
        
        recognition.onerror = (event) => {
            console.error("Speech recognition error:", event.error);
            if (aiStatus) {
                aiStatus.textContent = "Online";
                aiStatus.classList.remove('typing');
            }
            voiceBtn.style.color = '#1e40af';
        };
    } else if (voiceBtn) {
        console.warn("Speech Recognition not supported.");
        voiceBtn.style.display = 'none';
    }

    const welcomeMessage = {
        en: `Hello ${repName}. I'm Atlas, your Sales Intelligence Assistant. My systems are live with your ${repTeam} pipeline data. How can I assist with your deal strategy or coaching today?`,
        hi: `‡§®‡§Æ‡§∏‡•ç‡§§‡•á ${repName}‡•§ ‡§Æ‡•à‡§Ç ‡§è‡§ü‡§≤‡§∏ ‡§π‡•Ç‡§Å, ‡§Ü‡§™‡§ï‡§æ ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§á‡§Ç‡§ü‡•á‡§≤‡§ø‡§ú‡•á‡§Ç‡§∏ ‡§∏‡§π‡§æ‡§Ø‡§ï‡•§ ‡§Æ‡•á‡§∞‡§æ ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§Ü‡§™‡§ï‡•á ${repTeam} ‡§™‡§æ‡§á‡§™‡§≤‡§æ‡§á‡§® ‡§°‡•á‡§ü‡§æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§≤‡§æ‡§á‡§µ ‡§π‡•à‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§ú ‡§Ü‡§™‡§ï‡•Ä ‡§°‡•Ä‡§≤ ‡§∞‡§£‡§®‡•Ä‡§§‡§ø ‡§Ø‡§æ ‡§ï‡•ã‡§ö‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç ‡§ï‡•à‡§∏‡•á ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å?`,
        ta: `‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç ${repName}. ‡Æ®‡Ææ‡Æ©‡Øç ‡ÆÖ‡Æü‡Øç‡Æ≤‡Æ∏‡Øç, ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Æø‡Æ±‡Øç‡Æ™‡Æ©‡Øà ‡Æ®‡ØÅ‡Æ£‡Øç‡Æ£‡Æ±‡Æø‡Æµ‡ØÅ ‡Æâ‡Æ§‡Æµ‡Æø‡ÆØ‡Ææ‡Æ≥‡Æ∞‡Øç. ‡Æé‡Æ©‡Æ§‡ØÅ ‡ÆÖ‡ÆÆ‡Øà‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ${repTeam} ‡Æ™‡Øà‡Æ™‡Æ≤‡Øà‡Æ©‡Øç ‡Æ§‡Æ∞‡Æµ‡ØÅ‡Æü‡Æ©‡Øç ‡Æ®‡Øá‡Æ∞‡Æ≤‡Øà‡ÆØ‡Æø‡Æ≤‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ©. ‡Æá‡Æ©‡Øç‡Æ±‡ØÅ ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æí‡Æ™‡Øç‡Æ™‡Æ®‡Øç‡Æ§ ‡ÆÆ‡ØÇ‡Æ≤‡Øã‡Æ™‡Ææ‡ÆØ‡ÆÆ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø‡ÆØ‡Æø‡Æ≤‡Øç ‡Æ®‡Ææ‡Æ©‡Øç ‡Æé‡Æµ‡Øç‡Æµ‡Ææ‡Æ±‡ØÅ ‡Æâ‡Æ§‡Æµ ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡ØÅ‡ÆÆ‡Øç?`,
        ma: `‡¥π‡¥≤‡µá‡¥æ ${repName}. ‡¥û‡¥æ‡µª ‡¥Ö‡¥±‡µç‡¥±‡µç‡¥≤‡¥∏‡µç, ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥µ‡¥ø‡µΩ‡¥™‡µç‡¥™‡¥® ‡¥á‡µª‡µç‡¥±‡¥≤‡¥ø‡¥ú‡µª‡¥∏‡µç ‡¥Ö‡¥∏‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µª‡µç‡¥±‡µç. ‡¥é‡µª‡µç‡¥±‡µÜ ‡¥∏‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡¥ô‡µç‡¥ô‡µæ ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ${repTeam} ‡¥™‡µà‡¥™‡µç‡¥™‡µç‡¥≤‡µà‡µª ‡¥°‡¥æ‡¥±‡µç‡¥±‡¥Ø‡µÅ‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥≤‡µà‡¥µ‡¥æ‡¥£‡µç. ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥°‡µÄ‡µΩ ‡¥§‡¥®‡µç‡¥§‡µç‡¥∞‡¥§‡µç‡¥§‡¥ø‡¥≤‡µã ‡¥ï‡µã‡¥ö‡µç‡¥ö‡¥ø‡¥Ç‡¥ó‡¥ø‡¥≤‡µã ‡¥û‡¥æ‡µª ‡¥á‡¥®‡µç‡¥®‡µç ‡¥é‡¥ô‡µç‡¥ô‡¥®‡µÜ ‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç?`
    };

    if (chatBox.children.length === 0) {
        addMessage(welcomeMessage[currentLang] || welcomeMessage.en, 'ai');
    }
    
    if (sendBtn) sendBtn.addEventListener('click', () => processQuery(textInput.value));
    if (textInput) textInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') processQuery(textInput.value);
    });
}

// ----------------------------------------------------------------------
// --- EVENT LISTENERS ---
// ----------------------------------------------------------------------

document.addEventListener('DOMContentLoaded', () => {
    // Set up language selector event listeners
    if (languageSelectorDashboard) languageSelectorDashboard.addEventListener('change', (e) => {
        const lang = e.target.value;
        localStorage.setItem('currentLanguage', lang);
        updateContentLanguage(lang);
        // Re-initialize dashboard content in the new language if visible
        if (document.getElementById('dashboard-page').classList.contains('active')) initializeDashboard();
    });
    if (languageSelectorAi) languageSelectorAi.addEventListener('change', (e) => {
        const lang = e.target.value;
        localStorage.setItem('currentLanguage', lang);
        updateContentLanguage(lang);
        initializeAiAssistant();
    });

    // Core Auth/Session Management
    checkUserSession();

    // Modals & Links
    if (signupBtn) signupBtn.addEventListener('click', (e) => { e.preventDefault(); openModal('onboardingModal'); });
    if (heroSignupBtn) heroSignupBtn.addEventListener('click', (e) => { e.preventDefault(); openModal('onboardingModal'); });
    if (loginBtn) loginBtn.addEventListener('click', (e) => { e.preventDefault(); openModal('loginModal'); });
    if (logoutBtn) logoutBtn.addEventListener('click', handleLogout);
    if (logoutBtnApp) logoutBtnApp.addEventListener('click', handleLogout);
    if (onboardingForm) onboardingForm.addEventListener("submit", handleSignUp);
    if (loginForm) loginForm.addEventListener('submit', handleLogin);
});
    </script>
</body>
</html>